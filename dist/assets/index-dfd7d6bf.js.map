{"version":3,"mappings":"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AAY,WAAY,WAAY,UAChD,WAAY,WAAY,UAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,UAAY,WAAY,UAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,UAAY,WAAY,WAAY,WAChD,WAAY,WAAY,UAAY,WAAY,WAChD,WAAY,WAAY,WAAY,UAAY,WAChD,WAAY,UAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,QAAY,UAAY,UAAY,WAAY,UAChD,WAAY,WAAY,WAAY,WAAY,WAChD,UAAY,SAAY,WAAY,WAAY,UAChD,WAAY,WAAY,WAAY,UAAY,WAChD,WAAY,WAAY,UAAY,WAAY,UAChD,WAAY,WAAY,UAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,UAChD,WAAY,WAAY,WAAY,WAAY,WAChD,SAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,UAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,SAAY,UAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,SAChD,WAAY,WAAY,UAAY,WAAY,WAChD,WAAY,WAAY,UAAY,UAAY,UAChD,WAAY,WAAY,WAAY,UAAY,WAChD,WAAY,WAAY,WAAY,UAAY,UAChD,WAAY,WAAY,WAAY,WAAY,UAChD,UAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,UAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,UAAY,WAAY,UAAY,UAAY,UAChD,WAAY,UAAY,WAAY,UAAY,WAChD,WAAY,SAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,UAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,UAAY,WAAY,WAAY,WAAY,UAChD,WAAY,WAAY,WAAY,WAAY,UAChD,WAAY,UAAY,UAAY,UAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,SAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,UAAY,WAChD,UAAY,UAAY,WAAY,WAAY,UAChD,WAAY,SAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,UAAY,WAAY,WAChD,WAAY,WAAY,UAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,UAAY,UAAY,UAAY,WAAY,WAChD,WAAY,WAAY,UAAY,WAAY,UAChD,WAAY,WAAY,WAAY,WAAY,WAChD,UAAY,WAAY,WAAY,WAAY,WAChD,WAAY,UAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,UAAY,WAAY,UAChD,UAAY,WAAY,UAAY,UAAY,UAChD,UAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,UAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,UAChD,WAAY,UAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,UAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,UAAY,WAAY,WAAY,UAChD,WAAY,UAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,SAAY,WAChD,UAAY,WAAY,WAAY,WAAY,WAChD,UAAY,WAAY,UAAY,WAAY,WAChD,WAAY,WAAY,UAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,UAAY,WAAY,WAAY,UAChD,UAAY,WAAY,UAAY,WAAY,UAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,UAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,SAAY,WAAY,SAAY,WAAY,WAChD,WAAY,WAAY,UAAY,WAAY,WAChD,WAAY,UAAY,WAAY,WAAY,WAChD,UAAY,WAAY,WAAY,UAAY,UAChD,SAAY,WAAY,WAAY,WAAY,UAChD,UAAY,WAAY,WAAY,WAAY,WAChD,UAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,UAChD,WAAY,UAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,UAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,UAAY,WAChD,WAAY,WAAY,WAAY,WAAY,UAChD,WAAY,WAAY,WAAY,UAAY,WAChD,UAAY,UAAY,WAAY,WAAY,WAChD,UAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,UAAY,WAAY,WAAY,WAChD,WAAY,UAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,UAAY,WAChD,UAAY,UAAY,UAAY,WAAY,UAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,UAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,QAChD,UAAY,UAAY,UAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,UAAY,WAAY,WAAY,WAChD,UAAY,WAAY,WAAY,UAAY,WAChD,WAAY,UAAY,WAAY,WAAY,WAChD,WAAY,WAAY,UAAY,WAAY,WAChD,WAAY,WAAY,WAAY,UAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,UAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,UAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,UAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,UAChD,WAAY,WAAY,UAAY,SAAY,WAChD,SAAY,WAAY,WAAY,UAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,WAAY,WAAY,UAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,UAChD,WAAY,SAAY,SAAY,WAAY,WAChD,WAAY,WAAY,UAAY,UAA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","names":["EncryptionService","encryptedData","decodedData","key","data","tag","iv","cipherText","cryptoKey","combined","decryptedData","error","decodedD","binaryString","len","bytes","i","base64","__publicField","instanceOfAny","object","constructors","c","idbProxyableTypes","cursorAdvanceMethods","getIdbProxyableTypes","getCursorAdvanceMethods","cursorRequestMap","transactionDoneMap","transactionStoreNamesMap","transformCache","reverseTransformCache","promisifyRequest","request","promise","resolve","reject","unlisten","success","wrap","value","cacheDonePromiseForTransaction","tx","done","complete","idbProxyTraps","target","prop","receiver","replaceTraps","callback","wrapFunction","func","storeNames","args","unwrap","transformCachableValue","newValue","openDB","name","version","blocked","upgrade","blocking","terminated","openPromise","event","db","readMethods","writeMethods","cachedMethods","getMethod","targetFuncName","useIndex","isWrite","method","storeName","oldTraps","maskEmail","email","username","domain","maskName","part","maskAdaptedUserData","user","DatabaseService","users","store","maskedUser","id","totalRecords","isOnline","action","dbService","__viteBrowserExternal","global","factory","require","module","this","bcrypt","randomFallback","random","require$$0","a","randomAvailable","rounds","seed_length","GENSALT_DEFAULT_LOG2_ROUNDS","salt","base64_encode","BCRYPT_SALT_LEN","_async","nextTick","err","res","s","_hash","progressCallback","safeStringCompare","known","unknown","right","wrong","k","hash","comp","stringToBytes","str","out","utfx","b","BASE64_CODE","BASE64_INDEX","stringFromCharCode","off","rs","c1","c2","base64_decode","slen","olen","c3","c4","o","code","src","dst","cp","d","fail","l","BLOWFISH_NUM_ROUNDS","MAX_EXECUTION_TIME","P_ORIG","S_ORIG","C_ORIG","_encipher","lr","P","S","n","r","_streamtoword","offp","word","_key","offset","plen","sw","_ekskey","_crypt","cdata","clen","j","next","start","ret","minor","r1","r2","real_salt","passwordb","saltb","finish","ApiService","config","url","options","response","credentials","cachedUser","adaptedUser","firstName","lastNameParts","lastName","currentPage","allUsers","cachedUsers","adaptedUsers","queue","item","userId","plainPassword","hashedPassword","apiService","useAuthStore","defineStore","ref","isAuthenticated","isLoading","login","password","userData","logout","useSyncStore","isSyncing","lastSyncTime","initialize","status","startSync","getUsers","syncStore","storeToRefs","_createBlock","_Transition","_withDirectives","_createElementVNode","_hoisted_1","_cache","_unref","syncInterval","router","useRouter","authStore","syncIntervalRef","updateOnlineStatus","resetSyncInterval","registerSyncInterval","onMounted","onUnmounted","handleLogout","_openBlock","_createElementBlock","_hoisted_2","_createVNode","_component_router_link","SyncProgress","_component_router_view","_withCtx","Component","_resolveDynamicComponent","props","__props","handleSubmit","_normalizeClass","_toDisplayString","$event","_hoisted_4","_hoisted_6","_hoisted_7","_hoisted_8","createRouter","createWebHistory","LoginForm","__vitePreload","to","_from","requiresAuth","record","app","createApp","App","pinia","createPinia","registration"],"sources":["../../src/services/encryption.service.ts","../../node_modules/idb/build/wrap-idb-value.js","../../node_modules/idb/build/index.js","../../src/utils/data-masker.ts","../../src/services/db.service.ts","../../__vite-browser-external","../../node_modules/bcryptjs/dist/bcrypt.js","../../src/services/api.service.ts","../../src/stores/auth.store.ts","../../src/stores/sync.store.ts","../../src/components/SyncProgress.vue","../../src/App.vue","../../src/components/LoginForm.vue","../../src/router/index.ts","../../src/main.ts"],"sourcesContent":["import type { EncryptedData } from \"../types\";\r\n\r\nexport class EncryptionService {\r\n  private static readonly KEY_LENGTH = 16;\r\n\r\n  static async decryptResponse(\r\n    encryptedData: EncryptedData\r\n  ): Promise<object | null> {\r\n    const decodedData = this.base64Decode(encryptedData.d);\r\n\r\n    const key = this.getDecryptionKey(decodedData);\r\n    const data = this.getEncryptedData(decodedData);\r\n\r\n    const tag = this.base64Decode(encryptedData.t);\r\n    const iv = this.base64Decode(encryptedData.n);\r\n\r\n    return this.decryptData(\r\n      this.binaryToUint8Array(key),\r\n      this.binaryToUint8Array(iv),\r\n      this.binaryToUint8Array(tag),\r\n      this.binaryToUint8Array(data)\r\n    );\r\n  }\r\n\r\n  private static async getCryptoKey(key: Uint8Array): Promise<CryptoKey> {\r\n    return crypto.subtle.importKey(\"raw\", key, { name: \"AES-GCM\" }, false, [\r\n      \"decrypt\",\r\n    ]);\r\n  }\r\n\r\n  private static async decryptData(\r\n    key: Uint8Array,\r\n    iv: Uint8Array,\r\n    tag: Uint8Array,\r\n    cipherText: Uint8Array\r\n  ): Promise<object | null> {\r\n    try {\r\n      const cryptoKey = await this.getCryptoKey(key);\r\n\r\n      const combined = new Uint8Array(cipherText.byteLength + tag.byteLength);\r\n      combined.set(new Uint8Array(cipherText), 0);\r\n      combined.set(new Uint8Array(tag), cipherText.byteLength);\r\n\r\n      const decryptedData = await crypto.subtle.decrypt(\r\n        {\r\n          name: \"AES-GCM\",\r\n          iv: iv,\r\n          tagLength: 128,\r\n        },\r\n        cryptoKey,\r\n        combined\r\n      );\r\n\r\n      const data = new TextDecoder().decode(decryptedData);\r\n\r\n      return JSON.parse(data);\r\n    } catch (error) {\r\n      console.error(\"Decryption failed:\", error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  private static getDecryptionKey(decodedD: string): string {\r\n    return decodedD.substring(0, this.KEY_LENGTH);\r\n  }\r\n\r\n  private static getEncryptedData(encryptedData: string): string {\r\n    return encryptedData.substring(this.KEY_LENGTH);\r\n  }\r\n\r\n  private static binaryToUint8Array(binaryString: string): Uint8Array {\r\n    const len = binaryString.length;\r\n\r\n    const bytes = new Uint8Array(len);\r\n\r\n    for (let i = 0; i < len; i++) {\r\n      bytes[i] = binaryString.charCodeAt(i);\r\n    }\r\n\r\n    return bytes;\r\n  }\r\n\r\n  private static base64Decode(base64: string): string {\r\n    return atob(base64);\r\n  }\r\n}\r\n","const instanceOfAny = (object, constructors) => constructors.some((c) => object instanceof c);\n\nlet idbProxyableTypes;\nlet cursorAdvanceMethods;\n// This is a function to prevent it throwing up in node environments.\nfunction getIdbProxyableTypes() {\n    return (idbProxyableTypes ||\n        (idbProxyableTypes = [\n            IDBDatabase,\n            IDBObjectStore,\n            IDBIndex,\n            IDBCursor,\n            IDBTransaction,\n        ]));\n}\n// This is a function to prevent it throwing up in node environments.\nfunction getCursorAdvanceMethods() {\n    return (cursorAdvanceMethods ||\n        (cursorAdvanceMethods = [\n            IDBCursor.prototype.advance,\n            IDBCursor.prototype.continue,\n            IDBCursor.prototype.continuePrimaryKey,\n        ]));\n}\nconst cursorRequestMap = new WeakMap();\nconst transactionDoneMap = new WeakMap();\nconst transactionStoreNamesMap = new WeakMap();\nconst transformCache = new WeakMap();\nconst reverseTransformCache = new WeakMap();\nfunction promisifyRequest(request) {\n    const promise = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            request.removeEventListener('success', success);\n            request.removeEventListener('error', error);\n        };\n        const success = () => {\n            resolve(wrap(request.result));\n            unlisten();\n        };\n        const error = () => {\n            reject(request.error);\n            unlisten();\n        };\n        request.addEventListener('success', success);\n        request.addEventListener('error', error);\n    });\n    promise\n        .then((value) => {\n        // Since cursoring reuses the IDBRequest (*sigh*), we cache it for later retrieval\n        // (see wrapFunction).\n        if (value instanceof IDBCursor) {\n            cursorRequestMap.set(value, request);\n        }\n        // Catching to avoid \"Uncaught Promise exceptions\"\n    })\n        .catch(() => { });\n    // This mapping exists in reverseTransformCache but doesn't doesn't exist in transformCache. This\n    // is because we create many promises from a single IDBRequest.\n    reverseTransformCache.set(promise, request);\n    return promise;\n}\nfunction cacheDonePromiseForTransaction(tx) {\n    // Early bail if we've already created a done promise for this transaction.\n    if (transactionDoneMap.has(tx))\n        return;\n    const done = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            tx.removeEventListener('complete', complete);\n            tx.removeEventListener('error', error);\n            tx.removeEventListener('abort', error);\n        };\n        const complete = () => {\n            resolve();\n            unlisten();\n        };\n        const error = () => {\n            reject(tx.error || new DOMException('AbortError', 'AbortError'));\n            unlisten();\n        };\n        tx.addEventListener('complete', complete);\n        tx.addEventListener('error', error);\n        tx.addEventListener('abort', error);\n    });\n    // Cache it for later retrieval.\n    transactionDoneMap.set(tx, done);\n}\nlet idbProxyTraps = {\n    get(target, prop, receiver) {\n        if (target instanceof IDBTransaction) {\n            // Special handling for transaction.done.\n            if (prop === 'done')\n                return transactionDoneMap.get(target);\n            // Polyfill for objectStoreNames because of Edge.\n            if (prop === 'objectStoreNames') {\n                return target.objectStoreNames || transactionStoreNamesMap.get(target);\n            }\n            // Make tx.store return the only store in the transaction, or undefined if there are many.\n            if (prop === 'store') {\n                return receiver.objectStoreNames[1]\n                    ? undefined\n                    : receiver.objectStore(receiver.objectStoreNames[0]);\n            }\n        }\n        // Else transform whatever we get back.\n        return wrap(target[prop]);\n    },\n    set(target, prop, value) {\n        target[prop] = value;\n        return true;\n    },\n    has(target, prop) {\n        if (target instanceof IDBTransaction &&\n            (prop === 'done' || prop === 'store')) {\n            return true;\n        }\n        return prop in target;\n    },\n};\nfunction replaceTraps(callback) {\n    idbProxyTraps = callback(idbProxyTraps);\n}\nfunction wrapFunction(func) {\n    // Due to expected object equality (which is enforced by the caching in `wrap`), we\n    // only create one new func per func.\n    // Edge doesn't support objectStoreNames (booo), so we polyfill it here.\n    if (func === IDBDatabase.prototype.transaction &&\n        !('objectStoreNames' in IDBTransaction.prototype)) {\n        return function (storeNames, ...args) {\n            const tx = func.call(unwrap(this), storeNames, ...args);\n            transactionStoreNamesMap.set(tx, storeNames.sort ? storeNames.sort() : [storeNames]);\n            return wrap(tx);\n        };\n    }\n    // Cursor methods are special, as the behaviour is a little more different to standard IDB. In\n    // IDB, you advance the cursor and wait for a new 'success' on the IDBRequest that gave you the\n    // cursor. It's kinda like a promise that can resolve with many values. That doesn't make sense\n    // with real promises, so each advance methods returns a new promise for the cursor object, or\n    // undefined if the end of the cursor has been reached.\n    if (getCursorAdvanceMethods().includes(func)) {\n        return function (...args) {\n            // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n            // the original object.\n            func.apply(unwrap(this), args);\n            return wrap(cursorRequestMap.get(this));\n        };\n    }\n    return function (...args) {\n        // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n        // the original object.\n        return wrap(func.apply(unwrap(this), args));\n    };\n}\nfunction transformCachableValue(value) {\n    if (typeof value === 'function')\n        return wrapFunction(value);\n    // This doesn't return, it just creates a 'done' promise for the transaction,\n    // which is later returned for transaction.done (see idbObjectHandler).\n    if (value instanceof IDBTransaction)\n        cacheDonePromiseForTransaction(value);\n    if (instanceOfAny(value, getIdbProxyableTypes()))\n        return new Proxy(value, idbProxyTraps);\n    // Return the same value back if we're not going to transform it.\n    return value;\n}\nfunction wrap(value) {\n    // We sometimes generate multiple promises from a single IDBRequest (eg when cursoring), because\n    // IDB is weird and a single IDBRequest can yield many responses, so these can't be cached.\n    if (value instanceof IDBRequest)\n        return promisifyRequest(value);\n    // If we've already transformed this value before, reuse the transformed value.\n    // This is faster, but it also provides object equality.\n    if (transformCache.has(value))\n        return transformCache.get(value);\n    const newValue = transformCachableValue(value);\n    // Not all types are transformed.\n    // These may be primitive types, so they can't be WeakMap keys.\n    if (newValue !== value) {\n        transformCache.set(value, newValue);\n        reverseTransformCache.set(newValue, value);\n    }\n    return newValue;\n}\nconst unwrap = (value) => reverseTransformCache.get(value);\n\nexport { reverseTransformCache as a, instanceOfAny as i, replaceTraps as r, unwrap as u, wrap as w };\n","import { w as wrap, r as replaceTraps } from './wrap-idb-value.js';\nexport { u as unwrap, w as wrap } from './wrap-idb-value.js';\n\n/**\n * Open a database.\n *\n * @param name Name of the database.\n * @param version Schema version.\n * @param callbacks Additional callbacks.\n */\nfunction openDB(name, version, { blocked, upgrade, blocking, terminated } = {}) {\n    const request = indexedDB.open(name, version);\n    const openPromise = wrap(request);\n    if (upgrade) {\n        request.addEventListener('upgradeneeded', (event) => {\n            upgrade(wrap(request.result), event.oldVersion, event.newVersion, wrap(request.transaction), event);\n        });\n    }\n    if (blocked) {\n        request.addEventListener('blocked', (event) => blocked(\n        // Casting due to https://github.com/microsoft/TypeScript-DOM-lib-generator/pull/1405\n        event.oldVersion, event.newVersion, event));\n    }\n    openPromise\n        .then((db) => {\n        if (terminated)\n            db.addEventListener('close', () => terminated());\n        if (blocking) {\n            db.addEventListener('versionchange', (event) => blocking(event.oldVersion, event.newVersion, event));\n        }\n    })\n        .catch(() => { });\n    return openPromise;\n}\n/**\n * Delete a database.\n *\n * @param name Name of the database.\n */\nfunction deleteDB(name, { blocked } = {}) {\n    const request = indexedDB.deleteDatabase(name);\n    if (blocked) {\n        request.addEventListener('blocked', (event) => blocked(\n        // Casting due to https://github.com/microsoft/TypeScript-DOM-lib-generator/pull/1405\n        event.oldVersion, event));\n    }\n    return wrap(request).then(() => undefined);\n}\n\nconst readMethods = ['get', 'getKey', 'getAll', 'getAllKeys', 'count'];\nconst writeMethods = ['put', 'add', 'delete', 'clear'];\nconst cachedMethods = new Map();\nfunction getMethod(target, prop) {\n    if (!(target instanceof IDBDatabase &&\n        !(prop in target) &&\n        typeof prop === 'string')) {\n        return;\n    }\n    if (cachedMethods.get(prop))\n        return cachedMethods.get(prop);\n    const targetFuncName = prop.replace(/FromIndex$/, '');\n    const useIndex = prop !== targetFuncName;\n    const isWrite = writeMethods.includes(targetFuncName);\n    if (\n    // Bail if the target doesn't exist on the target. Eg, getAll isn't in Edge.\n    !(targetFuncName in (useIndex ? IDBIndex : IDBObjectStore).prototype) ||\n        !(isWrite || readMethods.includes(targetFuncName))) {\n        return;\n    }\n    const method = async function (storeName, ...args) {\n        // isWrite ? 'readwrite' : undefined gzipps better, but fails in Edge :(\n        const tx = this.transaction(storeName, isWrite ? 'readwrite' : 'readonly');\n        let target = tx.store;\n        if (useIndex)\n            target = target.index(args.shift());\n        // Must reject if op rejects.\n        // If it's a write operation, must reject if tx.done rejects.\n        // Must reject with op rejection first.\n        // Must resolve with op value.\n        // Must handle both promises (no unhandled rejections)\n        return (await Promise.all([\n            target[targetFuncName](...args),\n            isWrite && tx.done,\n        ]))[0];\n    };\n    cachedMethods.set(prop, method);\n    return method;\n}\nreplaceTraps((oldTraps) => ({\n    ...oldTraps,\n    get: (target, prop, receiver) => getMethod(target, prop) || oldTraps.get(target, prop, receiver),\n    has: (target, prop) => !!getMethod(target, prop) || oldTraps.has(target, prop),\n}));\n\nexport { deleteDB, openDB };\n","import type { User, AdaptedUser } from '../types';\r\n\r\nexport function maskEmail(email: string): string {\r\n  const [username, domain] = email.split('@');\r\n  const maskedUsername = username.charAt(0) + '*'.repeat(username.length - 2) + username.charAt(username.length - 1);\r\n  return `${maskedUsername}@${domain}`;\r\n}\r\n\r\nexport function maskPassword(password: string): string {\r\n  return '*'.repeat(password.length);\r\n}\r\n\r\nexport function maskName(name: string): string {\r\n  const parts = name.split(' ');\r\n  return parts.map(part => part.charAt(0) + '*'.repeat(part.length - 1)).join(' ');\r\n}\r\n\r\nexport function maskUserData(user: User): User {\r\n  return {\r\n    ...user,\r\n    email: maskEmail(user.email),\r\n    name: maskName(user.name)\r\n  };\r\n}\r\n\r\nexport function maskAdaptedUserData(user: AdaptedUser): AdaptedUser {\r\n  return {\r\n    ...user,\r\n    email: maskEmail(user.email),\r\n    firstName: maskName(user.firstName),\r\n    lastName: maskName(user.lastName)\r\n  };\r\n} ","import { openDB, DBSchema, IDBPDatabase } from 'idb';\r\nimport type { AdaptedUser } from '../types';\r\nimport { maskAdaptedUserData } from '../utils/data-masker';\r\n\r\ninterface SyncAppDB extends DBSchema {\r\n  users: {\r\n    key: number;\r\n    value: AdaptedUser;\r\n    indexes: { 'by-username': string };\r\n  };\r\n  syncStatus: {\r\n    key: string;\r\n    value: {\r\n      id: string;\r\n      lastSync: number;\r\n      totalRecords: number;\r\n      isOnline: boolean;\r\n    };\r\n  };\r\n  offlineQueue: {\r\n    key: string;\r\n    value: {\r\n      id: string;\r\n      action: 'create' | 'update' | 'delete';\r\n      data: any;\r\n      timestamp: number;\r\n    };\r\n  };\r\n}\r\n\r\nclass DatabaseService {\r\n  private db: IDBPDatabase<SyncAppDB> | null = null;\r\n  private readonly DB_NAME = 'sync-app-db';\r\n  private readonly DB_VERSION = 1;\r\n\r\n  async init(): Promise<void> {\r\n    this.db = await openDB<SyncAppDB>(this.DB_NAME, this.DB_VERSION, {\r\n      upgrade(db) {\r\n        // Create users store\r\n        const userStore = db.createObjectStore('users', { keyPath: 'id' });\r\n        userStore.createIndex('by-username', 'username', { unique: true });\r\n\r\n        // Create sync status store\r\n        db.createObjectStore('syncStatus', { keyPath: 'id' });\r\n\r\n        // Create offline queue store\r\n        db.createObjectStore('offlineQueue', { keyPath: 'id' });\r\n      },\r\n    });\r\n\r\n    // Initialize sync status\r\n    await this.updateSyncStatus(0, navigator.onLine);\r\n  }\r\n\r\n  async saveUsers(users: AdaptedUser[]): Promise<void> {\r\n    if (!this.db) throw new Error('Database not initialized');\r\n\r\n    const tx = this.db.transaction('users', 'readwrite');\r\n    const store = tx.objectStore('users');\r\n\r\n    for (const user of users) {\r\n      // Only mask non-password fields\r\n      const maskedUser = {\r\n        ...maskAdaptedUserData(user),\r\n        password: user.password // Keep the original password hash\r\n      };\r\n      await store.put(maskedUser);\r\n    }\r\n\r\n    await tx.done;\r\n  }\r\n\r\n  async getUser(id: number): Promise<AdaptedUser | undefined> {\r\n    if (!this.db) throw new Error('Database not initialized');\r\n    return this.db.get('users', id);\r\n  }\r\n\r\n  async getUserByUsername(username: string): Promise<AdaptedUser | undefined> {\r\n    if (!this.db) throw new Error('Database not initialized');\r\n    const index = this.db.transaction('users').store.index('by-username');\r\n    return index.get(username);\r\n  }\r\n\r\n  async getAllUsers(): Promise<AdaptedUser[]> {\r\n    if (!this.db) throw new Error('Database not initialized');\r\n    return this.db.getAll('users');\r\n  }\r\n\r\n  async updateSyncStatus(totalRecords: number, isOnline: boolean = navigator.onLine): Promise<void> {\r\n    if (!this.db) throw new Error('Database not initialized');\r\n    const store = this.db.transaction('syncStatus', 'readwrite').store;\r\n    await store.put({\r\n      id: 'lastSync',\r\n      lastSync: Date.now(),\r\n      totalRecords,\r\n      isOnline\r\n    });\r\n  }\r\n\r\n  async getSyncStatus(): Promise<{ lastSync: number; totalRecords: number; isOnline: boolean } | undefined> {\r\n    if (!this.db) throw new Error('Database not initialized');\r\n    return this.db.get('syncStatus', 'lastSync');\r\n  }\r\n\r\n  async addToOfflineQueue(action: 'create' | 'update' | 'delete', data: any): Promise<void> {\r\n    if (!this.db) throw new Error('Database not initialized');\r\n    const store = this.db.transaction('offlineQueue', 'readwrite').store;\r\n    await store.put({\r\n      id: `${action}-${Date.now()}`,\r\n      action,\r\n      data,\r\n      timestamp: Date.now()\r\n    });\r\n  }\r\n\r\n  async getOfflineQueue(): Promise<Array<{ action: string; data: any; timestamp: number }>> {\r\n    if (!this.db) throw new Error('Database not initialized');\r\n    return this.db.getAll('offlineQueue');\r\n  }\r\n\r\n  async clearOfflineQueue(): Promise<void> {\r\n    if (!this.db) throw new Error('Database not initialized');\r\n    const store = this.db.transaction('offlineQueue', 'readwrite').store;\r\n    await store.clear();\r\n  }\r\n}\r\n\r\nexport const dbService = new DatabaseService(); ","export default {}","/*\r\n Copyright (c) 2012 Nevins Bartolomeo <nevins.bartolomeo@gmail.com>\r\n Copyright (c) 2012 Shane Girish <shaneGirish@gmail.com>\r\n Copyright (c) 2014 Daniel Wirtz <dcode@dcode.io>\r\n\r\n Redistribution and use in source and binary forms, with or without\r\n modification, are permitted provided that the following conditions\r\n are met:\r\n 1. Redistributions of source code must retain the above copyright\r\n notice, this list of conditions and the following disclaimer.\r\n 2. Redistributions in binary form must reproduce the above copyright\r\n notice, this list of conditions and the following disclaimer in the\r\n documentation and/or other materials provided with the distribution.\r\n 3. The name of the author may not be used to endorse or promote products\r\n derived from this software without specific prior written permission.\r\n\r\n THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR\r\n IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES\r\n OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\r\n IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,\r\n INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\r\n NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\r\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\r\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\r\n THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n */\r\n\r\n/**\r\n * @license bcrypt.js (c) 2013 Daniel Wirtz <dcode@dcode.io>\r\n * Released under the Apache License, Version 2.0\r\n * see: https://github.com/dcodeIO/bcrypt.js for details\r\n */\r\n(function(global, factory) {\r\n\r\n    /* AMD */ if (typeof define === 'function' && define[\"amd\"])\r\n        define([], factory);\r\n    /* CommonJS */ else if (typeof require === 'function' && typeof module === \"object\" && module && module[\"exports\"])\r\n        module[\"exports\"] = factory();\r\n    /* Global */ else\r\n        (global[\"dcodeIO\"] = global[\"dcodeIO\"] || {})[\"bcrypt\"] = factory();\r\n\r\n}(this, function() {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * bcrypt namespace.\r\n     * @type {Object.<string,*>}\r\n     */\r\n    var bcrypt = {};\r\n\r\n    /**\r\n     * The random implementation to use as a fallback.\r\n     * @type {?function(number):!Array.<number>}\r\n     * @inner\r\n     */\r\n    var randomFallback = null;\r\n\r\n    /**\r\n     * Generates cryptographically secure random bytes.\r\n     * @function\r\n     * @param {number} len Bytes length\r\n     * @returns {!Array.<number>} Random bytes\r\n     * @throws {Error} If no random implementation is available\r\n     * @inner\r\n     */\r\n    function random(len) {\r\n        /* node */ if (typeof module !== 'undefined' && module && module['exports'])\r\n            try {\r\n                return require(\"crypto\")['randomBytes'](len);\r\n            } catch (e) {}\r\n        /* WCA */ try {\r\n            var a; (self['crypto']||self['msCrypto'])['getRandomValues'](a = new Uint32Array(len));\r\n            return Array.prototype.slice.call(a);\r\n        } catch (e) {}\r\n        /* fallback */ if (!randomFallback)\r\n            throw Error(\"Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative\");\r\n        return randomFallback(len);\r\n    }\r\n\r\n    // Test if any secure randomness source is available\r\n    var randomAvailable = false;\r\n    try {\r\n        random(1);\r\n        randomAvailable = true;\r\n    } catch (e) {}\r\n\r\n    // Default fallback, if any\r\n    randomFallback = null;\r\n    /**\r\n     * Sets the pseudo random number generator to use as a fallback if neither node's `crypto` module nor the Web Crypto\r\n     *  API is available. Please note: It is highly important that the PRNG used is cryptographically secure and that it\r\n     *  is seeded properly!\r\n     * @param {?function(number):!Array.<number>} random Function taking the number of bytes to generate as its\r\n     *  sole argument, returning the corresponding array of cryptographically secure random byte values.\r\n     * @see http://nodejs.org/api/crypto.html\r\n     * @see http://www.w3.org/TR/WebCryptoAPI/\r\n     */\r\n    bcrypt.setRandomFallback = function(random) {\r\n        randomFallback = random;\r\n    };\r\n\r\n    /**\r\n     * Synchronously generates a salt.\r\n     * @param {number=} rounds Number of rounds to use, defaults to 10 if omitted\r\n     * @param {number=} seed_length Not supported.\r\n     * @returns {string} Resulting salt\r\n     * @throws {Error} If a random fallback is required but not set\r\n     * @expose\r\n     */\r\n    bcrypt.genSaltSync = function(rounds, seed_length) {\r\n        rounds = rounds || GENSALT_DEFAULT_LOG2_ROUNDS;\r\n        if (typeof rounds !== 'number')\r\n            throw Error(\"Illegal arguments: \"+(typeof rounds)+\", \"+(typeof seed_length));\r\n        if (rounds < 4)\r\n            rounds = 4;\r\n        else if (rounds > 31)\r\n            rounds = 31;\r\n        var salt = [];\r\n        salt.push(\"$2a$\");\r\n        if (rounds < 10)\r\n            salt.push(\"0\");\r\n        salt.push(rounds.toString());\r\n        salt.push('$');\r\n        salt.push(base64_encode(random(BCRYPT_SALT_LEN), BCRYPT_SALT_LEN)); // May throw\r\n        return salt.join('');\r\n    };\r\n\r\n    /**\r\n     * Asynchronously generates a salt.\r\n     * @param {(number|function(Error, string=))=} rounds Number of rounds to use, defaults to 10 if omitted\r\n     * @param {(number|function(Error, string=))=} seed_length Not supported.\r\n     * @param {function(Error, string=)=} callback Callback receiving the error, if any, and the resulting salt\r\n     * @returns {!Promise} If `callback` has been omitted\r\n     * @throws {Error} If `callback` is present but not a function\r\n     * @expose\r\n     */\r\n    bcrypt.genSalt = function(rounds, seed_length, callback) {\r\n        if (typeof seed_length === 'function')\r\n            callback = seed_length,\r\n            seed_length = undefined; // Not supported.\r\n        if (typeof rounds === 'function')\r\n            callback = rounds,\r\n            rounds = undefined;\r\n        if (typeof rounds === 'undefined')\r\n            rounds = GENSALT_DEFAULT_LOG2_ROUNDS;\r\n        else if (typeof rounds !== 'number')\r\n            throw Error(\"illegal arguments: \"+(typeof rounds));\r\n\r\n        function _async(callback) {\r\n            nextTick(function() { // Pretty thin, but salting is fast enough\r\n                try {\r\n                    callback(null, bcrypt.genSaltSync(rounds));\r\n                } catch (err) {\r\n                    callback(err);\r\n                }\r\n            });\r\n        }\r\n\r\n        if (callback) {\r\n            if (typeof callback !== 'function')\r\n                throw Error(\"Illegal callback: \"+typeof(callback));\r\n            _async(callback);\r\n        } else\r\n            return new Promise(function(resolve, reject) {\r\n                _async(function(err, res) {\r\n                    if (err) {\r\n                        reject(err);\r\n                        return;\r\n                    }\r\n                    resolve(res);\r\n                });\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Synchronously generates a hash for the given string.\r\n     * @param {string} s String to hash\r\n     * @param {(number|string)=} salt Salt length to generate or salt to use, default to 10\r\n     * @returns {string} Resulting hash\r\n     * @expose\r\n     */\r\n    bcrypt.hashSync = function(s, salt) {\r\n        if (typeof salt === 'undefined')\r\n            salt = GENSALT_DEFAULT_LOG2_ROUNDS;\r\n        if (typeof salt === 'number')\r\n            salt = bcrypt.genSaltSync(salt);\r\n        if (typeof s !== 'string' || typeof salt !== 'string')\r\n            throw Error(\"Illegal arguments: \"+(typeof s)+', '+(typeof salt));\r\n        return _hash(s, salt);\r\n    };\r\n\r\n    /**\r\n     * Asynchronously generates a hash for the given string.\r\n     * @param {string} s String to hash\r\n     * @param {number|string} salt Salt length to generate or salt to use\r\n     * @param {function(Error, string=)=} callback Callback receiving the error, if any, and the resulting hash\r\n     * @param {function(number)=} progressCallback Callback successively called with the percentage of rounds completed\r\n     *  (0.0 - 1.0), maximally once per `MAX_EXECUTION_TIME = 100` ms.\r\n     * @returns {!Promise} If `callback` has been omitted\r\n     * @throws {Error} If `callback` is present but not a function\r\n     * @expose\r\n     */\r\n    bcrypt.hash = function(s, salt, callback, progressCallback) {\r\n\r\n        function _async(callback) {\r\n            if (typeof s === 'string' && typeof salt === 'number')\r\n                bcrypt.genSalt(salt, function(err, salt) {\r\n                    _hash(s, salt, callback, progressCallback);\r\n                });\r\n            else if (typeof s === 'string' && typeof salt === 'string')\r\n                _hash(s, salt, callback, progressCallback);\r\n            else\r\n                nextTick(callback.bind(this, Error(\"Illegal arguments: \"+(typeof s)+', '+(typeof salt))));\r\n        }\r\n\r\n        if (callback) {\r\n            if (typeof callback !== 'function')\r\n                throw Error(\"Illegal callback: \"+typeof(callback));\r\n            _async(callback);\r\n        } else\r\n            return new Promise(function(resolve, reject) {\r\n                _async(function(err, res) {\r\n                    if (err) {\r\n                        reject(err);\r\n                        return;\r\n                    }\r\n                    resolve(res);\r\n                });\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Compares two strings of the same length in constant time.\r\n     * @param {string} known Must be of the correct length\r\n     * @param {string} unknown Must be the same length as `known`\r\n     * @returns {boolean}\r\n     * @inner\r\n     */\r\n    function safeStringCompare(known, unknown) {\r\n        var right = 0,\r\n            wrong = 0;\r\n        for (var i=0, k=known.length; i<k; ++i) {\r\n            if (known.charCodeAt(i) === unknown.charCodeAt(i))\r\n                ++right;\r\n            else\r\n                ++wrong;\r\n        }\r\n        // Prevent removal of unused variables (never true, actually)\r\n        if (right < 0)\r\n            return false;\r\n        return wrong === 0;\r\n    }\r\n\r\n    /**\r\n     * Synchronously tests a string against a hash.\r\n     * @param {string} s String to compare\r\n     * @param {string} hash Hash to test against\r\n     * @returns {boolean} true if matching, otherwise false\r\n     * @throws {Error} If an argument is illegal\r\n     * @expose\r\n     */\r\n    bcrypt.compareSync = function(s, hash) {\r\n        if (typeof s !== \"string\" || typeof hash !== \"string\")\r\n            throw Error(\"Illegal arguments: \"+(typeof s)+', '+(typeof hash));\r\n        if (hash.length !== 60)\r\n            return false;\r\n        return safeStringCompare(bcrypt.hashSync(s, hash.substr(0, hash.length-31)), hash);\r\n    };\r\n\r\n    /**\r\n     * Asynchronously compares the given data against the given hash.\r\n     * @param {string} s Data to compare\r\n     * @param {string} hash Data to be compared to\r\n     * @param {function(Error, boolean)=} callback Callback receiving the error, if any, otherwise the result\r\n     * @param {function(number)=} progressCallback Callback successively called with the percentage of rounds completed\r\n     *  (0.0 - 1.0), maximally once per `MAX_EXECUTION_TIME = 100` ms.\r\n     * @returns {!Promise} If `callback` has been omitted\r\n     * @throws {Error} If `callback` is present but not a function\r\n     * @expose\r\n     */\r\n    bcrypt.compare = function(s, hash, callback, progressCallback) {\r\n\r\n        function _async(callback) {\r\n            if (typeof s !== \"string\" || typeof hash !== \"string\") {\r\n                nextTick(callback.bind(this, Error(\"Illegal arguments: \"+(typeof s)+', '+(typeof hash))));\r\n                return;\r\n            }\r\n            if (hash.length !== 60) {\r\n                nextTick(callback.bind(this, null, false));\r\n                return;\r\n            }\r\n            bcrypt.hash(s, hash.substr(0, 29), function(err, comp) {\r\n                if (err)\r\n                    callback(err);\r\n                else\r\n                    callback(null, safeStringCompare(comp, hash));\r\n            }, progressCallback);\r\n        }\r\n\r\n        if (callback) {\r\n            if (typeof callback !== 'function')\r\n                throw Error(\"Illegal callback: \"+typeof(callback));\r\n            _async(callback);\r\n        } else\r\n            return new Promise(function(resolve, reject) {\r\n                _async(function(err, res) {\r\n                    if (err) {\r\n                        reject(err);\r\n                        return;\r\n                    }\r\n                    resolve(res);\r\n                });\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Gets the number of rounds used to encrypt the specified hash.\r\n     * @param {string} hash Hash to extract the used number of rounds from\r\n     * @returns {number} Number of rounds used\r\n     * @throws {Error} If `hash` is not a string\r\n     * @expose\r\n     */\r\n    bcrypt.getRounds = function(hash) {\r\n        if (typeof hash !== \"string\")\r\n            throw Error(\"Illegal arguments: \"+(typeof hash));\r\n        return parseInt(hash.split(\"$\")[2], 10);\r\n    };\r\n\r\n    /**\r\n     * Gets the salt portion from a hash. Does not validate the hash.\r\n     * @param {string} hash Hash to extract the salt from\r\n     * @returns {string} Extracted salt part\r\n     * @throws {Error} If `hash` is not a string or otherwise invalid\r\n     * @expose\r\n     */\r\n    bcrypt.getSalt = function(hash) {\r\n        if (typeof hash !== 'string')\r\n            throw Error(\"Illegal arguments: \"+(typeof hash));\r\n        if (hash.length !== 60)\r\n            throw Error(\"Illegal hash length: \"+hash.length+\" != 60\");\r\n        return hash.substring(0, 29);\r\n    };\r\n\r\n    /**\r\n     * Continues with the callback on the next tick.\r\n     * @function\r\n     * @param {function(...[*])} callback Callback to execute\r\n     * @inner\r\n     */\r\n    var nextTick = typeof process !== 'undefined' && process && typeof process.nextTick === 'function'\r\n        ? (typeof setImmediate === 'function' ? setImmediate : process.nextTick)\r\n        : setTimeout;\r\n\r\n    /**\r\n     * Converts a JavaScript string to UTF8 bytes.\r\n     * @param {string} str String\r\n     * @returns {!Array.<number>} UTF8 bytes\r\n     * @inner\r\n     */\r\n    function stringToBytes(str) {\r\n        var out = [],\r\n            i = 0;\r\n        utfx.encodeUTF16toUTF8(function() {\r\n            if (i >= str.length) return null;\r\n            return str.charCodeAt(i++);\r\n        }, function(b) {\r\n            out.push(b);\r\n        });\r\n        return out;\r\n    }\r\n\r\n    // A base64 implementation for the bcrypt algorithm. This is partly non-standard.\r\n\r\n    /**\r\n     * bcrypt's own non-standard base64 dictionary.\r\n     * @type {!Array.<string>}\r\n     * @const\r\n     * @inner\r\n     **/\r\n    var BASE64_CODE = \"./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\".split('');\r\n\r\n    /**\r\n     * @type {!Array.<number>}\r\n     * @const\r\n     * @inner\r\n     **/\r\n    var BASE64_INDEX = [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 0,\r\n        1, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, -1, -1, -1, -1, -1, -1,\r\n        -1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19,\r\n        20, 21, 22, 23, 24, 25, 26, 27, -1, -1, -1, -1, -1, -1, 28, 29, 30,\r\n        31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47,\r\n        48, 49, 50, 51, 52, 53, -1, -1, -1, -1, -1];\r\n\r\n    /**\r\n     * @type {!function(...number):string}\r\n     * @inner\r\n     */\r\n    var stringFromCharCode = String.fromCharCode;\r\n\r\n    /**\r\n     * Encodes a byte array to base64 with up to len bytes of input.\r\n     * @param {!Array.<number>} b Byte array\r\n     * @param {number} len Maximum input length\r\n     * @returns {string}\r\n     * @inner\r\n     */\r\n    function base64_encode(b, len) {\r\n        var off = 0,\r\n            rs = [],\r\n            c1, c2;\r\n        if (len <= 0 || len > b.length)\r\n            throw Error(\"Illegal len: \"+len);\r\n        while (off < len) {\r\n            c1 = b[off++] & 0xff;\r\n            rs.push(BASE64_CODE[(c1 >> 2) & 0x3f]);\r\n            c1 = (c1 & 0x03) << 4;\r\n            if (off >= len) {\r\n                rs.push(BASE64_CODE[c1 & 0x3f]);\r\n                break;\r\n            }\r\n            c2 = b[off++] & 0xff;\r\n            c1 |= (c2 >> 4) & 0x0f;\r\n            rs.push(BASE64_CODE[c1 & 0x3f]);\r\n            c1 = (c2 & 0x0f) << 2;\r\n            if (off >= len) {\r\n                rs.push(BASE64_CODE[c1 & 0x3f]);\r\n                break;\r\n            }\r\n            c2 = b[off++] & 0xff;\r\n            c1 |= (c2 >> 6) & 0x03;\r\n            rs.push(BASE64_CODE[c1 & 0x3f]);\r\n            rs.push(BASE64_CODE[c2 & 0x3f]);\r\n        }\r\n        return rs.join('');\r\n    }\r\n\r\n    /**\r\n     * Decodes a base64 encoded string to up to len bytes of output.\r\n     * @param {string} s String to decode\r\n     * @param {number} len Maximum output length\r\n     * @returns {!Array.<number>}\r\n     * @inner\r\n     */\r\n    function base64_decode(s, len) {\r\n        var off = 0,\r\n            slen = s.length,\r\n            olen = 0,\r\n            rs = [],\r\n            c1, c2, c3, c4, o, code;\r\n        if (len <= 0)\r\n            throw Error(\"Illegal len: \"+len);\r\n        while (off < slen - 1 && olen < len) {\r\n            code = s.charCodeAt(off++);\r\n            c1 = code < BASE64_INDEX.length ? BASE64_INDEX[code] : -1;\r\n            code = s.charCodeAt(off++);\r\n            c2 = code < BASE64_INDEX.length ? BASE64_INDEX[code] : -1;\r\n            if (c1 == -1 || c2 == -1)\r\n                break;\r\n            o = (c1 << 2) >>> 0;\r\n            o |= (c2 & 0x30) >> 4;\r\n            rs.push(stringFromCharCode(o));\r\n            if (++olen >= len || off >= slen)\r\n                break;\r\n            code = s.charCodeAt(off++);\r\n            c3 = code < BASE64_INDEX.length ? BASE64_INDEX[code] : -1;\r\n            if (c3 == -1)\r\n                break;\r\n            o = ((c2 & 0x0f) << 4) >>> 0;\r\n            o |= (c3 & 0x3c) >> 2;\r\n            rs.push(stringFromCharCode(o));\r\n            if (++olen >= len || off >= slen)\r\n                break;\r\n            code = s.charCodeAt(off++);\r\n            c4 = code < BASE64_INDEX.length ? BASE64_INDEX[code] : -1;\r\n            o = ((c3 & 0x03) << 6) >>> 0;\r\n            o |= c4;\r\n            rs.push(stringFromCharCode(o));\r\n            ++olen;\r\n        }\r\n        var res = [];\r\n        for (off = 0; off<olen; off++)\r\n            res.push(rs[off].charCodeAt(0));\r\n        return res;\r\n    }\r\n\r\n    /**\r\n     * utfx-embeddable (c) 2014 Daniel Wirtz <dcode@dcode.io>\r\n     * Released under the Apache License, Version 2.0\r\n     * see: https://github.com/dcodeIO/utfx for details\r\n     */\r\n    var utfx = function() {\r\n        \"use strict\";\r\n\r\n        /**\r\n         * utfx namespace.\r\n         * @inner\r\n         * @type {!Object.<string,*>}\r\n         */\r\n        var utfx = {};\r\n\r\n        /**\r\n         * Maximum valid code point.\r\n         * @type {number}\r\n         * @const\r\n         */\r\n        utfx.MAX_CODEPOINT = 0x10FFFF;\r\n\r\n        /**\r\n         * Encodes UTF8 code points to UTF8 bytes.\r\n         * @param {(!function():number|null) | number} src Code points source, either as a function returning the next code point\r\n         *  respectively `null` if there are no more code points left or a single numeric code point.\r\n         * @param {!function(number)} dst Bytes destination as a function successively called with the next byte\r\n         */\r\n        utfx.encodeUTF8 = function(src, dst) {\r\n            var cp = null;\r\n            if (typeof src === 'number')\r\n                cp = src,\r\n                src = function() { return null; };\r\n            while (cp !== null || (cp = src()) !== null) {\r\n                if (cp < 0x80)\r\n                    dst(cp&0x7F);\r\n                else if (cp < 0x800)\r\n                    dst(((cp>>6)&0x1F)|0xC0),\r\n                    dst((cp&0x3F)|0x80);\r\n                else if (cp < 0x10000)\r\n                    dst(((cp>>12)&0x0F)|0xE0),\r\n                    dst(((cp>>6)&0x3F)|0x80),\r\n                    dst((cp&0x3F)|0x80);\r\n                else\r\n                    dst(((cp>>18)&0x07)|0xF0),\r\n                    dst(((cp>>12)&0x3F)|0x80),\r\n                    dst(((cp>>6)&0x3F)|0x80),\r\n                    dst((cp&0x3F)|0x80);\r\n                cp = null;\r\n            }\r\n        };\r\n\r\n        /**\r\n         * Decodes UTF8 bytes to UTF8 code points.\r\n         * @param {!function():number|null} src Bytes source as a function returning the next byte respectively `null` if there\r\n         *  are no more bytes left.\r\n         * @param {!function(number)} dst Code points destination as a function successively called with each decoded code point.\r\n         * @throws {RangeError} If a starting byte is invalid in UTF8\r\n         * @throws {Error} If the last sequence is truncated. Has an array property `bytes` holding the\r\n         *  remaining bytes.\r\n         */\r\n        utfx.decodeUTF8 = function(src, dst) {\r\n            var a, b, c, d, fail = function(b) {\r\n                b = b.slice(0, b.indexOf(null));\r\n                var err = Error(b.toString());\r\n                err.name = \"TruncatedError\";\r\n                err['bytes'] = b;\r\n                throw err;\r\n            };\r\n            while ((a = src()) !== null) {\r\n                if ((a&0x80) === 0)\r\n                    dst(a);\r\n                else if ((a&0xE0) === 0xC0)\r\n                    ((b = src()) === null) && fail([a, b]),\r\n                    dst(((a&0x1F)<<6) | (b&0x3F));\r\n                else if ((a&0xF0) === 0xE0)\r\n                    ((b=src()) === null || (c=src()) === null) && fail([a, b, c]),\r\n                    dst(((a&0x0F)<<12) | ((b&0x3F)<<6) | (c&0x3F));\r\n                else if ((a&0xF8) === 0xF0)\r\n                    ((b=src()) === null || (c=src()) === null || (d=src()) === null) && fail([a, b, c ,d]),\r\n                    dst(((a&0x07)<<18) | ((b&0x3F)<<12) | ((c&0x3F)<<6) | (d&0x3F));\r\n                else throw RangeError(\"Illegal starting byte: \"+a);\r\n            }\r\n        };\r\n\r\n        /**\r\n         * Converts UTF16 characters to UTF8 code points.\r\n         * @param {!function():number|null} src Characters source as a function returning the next char code respectively\r\n         *  `null` if there are no more characters left.\r\n         * @param {!function(number)} dst Code points destination as a function successively called with each converted code\r\n         *  point.\r\n         */\r\n        utfx.UTF16toUTF8 = function(src, dst) {\r\n            var c1, c2 = null;\r\n            while (true) {\r\n                if ((c1 = c2 !== null ? c2 : src()) === null)\r\n                    break;\r\n                if (c1 >= 0xD800 && c1 <= 0xDFFF) {\r\n                    if ((c2 = src()) !== null) {\r\n                        if (c2 >= 0xDC00 && c2 <= 0xDFFF) {\r\n                            dst((c1-0xD800)*0x400+c2-0xDC00+0x10000);\r\n                            c2 = null; continue;\r\n                        }\r\n                    }\r\n                }\r\n                dst(c1);\r\n            }\r\n            if (c2 !== null) dst(c2);\r\n        };\r\n\r\n        /**\r\n         * Converts UTF8 code points to UTF16 characters.\r\n         * @param {(!function():number|null) | number} src Code points source, either as a function returning the next code point\r\n         *  respectively `null` if there are no more code points left or a single numeric code point.\r\n         * @param {!function(number)} dst Characters destination as a function successively called with each converted char code.\r\n         * @throws {RangeError} If a code point is out of range\r\n         */\r\n        utfx.UTF8toUTF16 = function(src, dst) {\r\n            var cp = null;\r\n            if (typeof src === 'number')\r\n                cp = src, src = function() { return null; };\r\n            while (cp !== null || (cp = src()) !== null) {\r\n                if (cp <= 0xFFFF)\r\n                    dst(cp);\r\n                else\r\n                    cp -= 0x10000,\r\n                    dst((cp>>10)+0xD800),\r\n                    dst((cp%0x400)+0xDC00);\r\n                cp = null;\r\n            }\r\n        };\r\n\r\n        /**\r\n         * Converts and encodes UTF16 characters to UTF8 bytes.\r\n         * @param {!function():number|null} src Characters source as a function returning the next char code respectively `null`\r\n         *  if there are no more characters left.\r\n         * @param {!function(number)} dst Bytes destination as a function successively called with the next byte.\r\n         */\r\n        utfx.encodeUTF16toUTF8 = function(src, dst) {\r\n            utfx.UTF16toUTF8(src, function(cp) {\r\n                utfx.encodeUTF8(cp, dst);\r\n            });\r\n        };\r\n\r\n        /**\r\n         * Decodes and converts UTF8 bytes to UTF16 characters.\r\n         * @param {!function():number|null} src Bytes source as a function returning the next byte respectively `null` if there\r\n         *  are no more bytes left.\r\n         * @param {!function(number)} dst Characters destination as a function successively called with each converted char code.\r\n         * @throws {RangeError} If a starting byte is invalid in UTF8\r\n         * @throws {Error} If the last sequence is truncated. Has an array property `bytes` holding the remaining bytes.\r\n         */\r\n        utfx.decodeUTF8toUTF16 = function(src, dst) {\r\n            utfx.decodeUTF8(src, function(cp) {\r\n                utfx.UTF8toUTF16(cp, dst);\r\n            });\r\n        };\r\n\r\n        /**\r\n         * Calculates the byte length of an UTF8 code point.\r\n         * @param {number} cp UTF8 code point\r\n         * @returns {number} Byte length\r\n         */\r\n        utfx.calculateCodePoint = function(cp) {\r\n            return (cp < 0x80) ? 1 : (cp < 0x800) ? 2 : (cp < 0x10000) ? 3 : 4;\r\n        };\r\n\r\n        /**\r\n         * Calculates the number of UTF8 bytes required to store UTF8 code points.\r\n         * @param {(!function():number|null)} src Code points source as a function returning the next code point respectively\r\n         *  `null` if there are no more code points left.\r\n         * @returns {number} The number of UTF8 bytes required\r\n         */\r\n        utfx.calculateUTF8 = function(src) {\r\n            var cp, l=0;\r\n            while ((cp = src()) !== null)\r\n                l += utfx.calculateCodePoint(cp);\r\n            return l;\r\n        };\r\n\r\n        /**\r\n         * Calculates the number of UTF8 code points respectively UTF8 bytes required to store UTF16 char codes.\r\n         * @param {(!function():number|null)} src Characters source as a function returning the next char code respectively\r\n         *  `null` if there are no more characters left.\r\n         * @returns {!Array.<number>} The number of UTF8 code points at index 0 and the number of UTF8 bytes required at index 1.\r\n         */\r\n        utfx.calculateUTF16asUTF8 = function(src) {\r\n            var n=0, l=0;\r\n            utfx.UTF16toUTF8(src, function(cp) {\r\n                ++n; l += utfx.calculateCodePoint(cp);\r\n            });\r\n            return [n,l];\r\n        };\r\n\r\n        return utfx;\r\n    }();\r\n\r\n    Date.now = Date.now || function() { return +new Date; };\r\n\r\n    /**\r\n     * @type {number}\r\n     * @const\r\n     * @inner\r\n     */\r\n    var BCRYPT_SALT_LEN = 16;\r\n\r\n    /**\r\n     * @type {number}\r\n     * @const\r\n     * @inner\r\n     */\r\n    var GENSALT_DEFAULT_LOG2_ROUNDS = 10;\r\n\r\n    /**\r\n     * @type {number}\r\n     * @const\r\n     * @inner\r\n     */\r\n    var BLOWFISH_NUM_ROUNDS = 16;\r\n\r\n    /**\r\n     * @type {number}\r\n     * @const\r\n     * @inner\r\n     */\r\n    var MAX_EXECUTION_TIME = 100;\r\n\r\n    /**\r\n     * @type {Array.<number>}\r\n     * @const\r\n     * @inner\r\n     */\r\n    var P_ORIG = [\r\n        0x243f6a88, 0x85a308d3, 0x13198a2e, 0x03707344, 0xa4093822,\r\n        0x299f31d0, 0x082efa98, 0xec4e6c89, 0x452821e6, 0x38d01377,\r\n        0xbe5466cf, 0x34e90c6c, 0xc0ac29b7, 0xc97c50dd, 0x3f84d5b5,\r\n        0xb5470917, 0x9216d5d9, 0x8979fb1b\r\n    ];\r\n\r\n    /**\r\n     * @type {Array.<number>}\r\n     * @const\r\n     * @inner\r\n     */\r\n    var S_ORIG = [\r\n        0xd1310ba6, 0x98dfb5ac, 0x2ffd72db, 0xd01adfb7, 0xb8e1afed,\r\n        0x6a267e96, 0xba7c9045, 0xf12c7f99, 0x24a19947, 0xb3916cf7,\r\n        0x0801f2e2, 0x858efc16, 0x636920d8, 0x71574e69, 0xa458fea3,\r\n        0xf4933d7e, 0x0d95748f, 0x728eb658, 0x718bcd58, 0x82154aee,\r\n        0x7b54a41d, 0xc25a59b5, 0x9c30d539, 0x2af26013, 0xc5d1b023,\r\n        0x286085f0, 0xca417918, 0xb8db38ef, 0x8e79dcb0, 0x603a180e,\r\n        0x6c9e0e8b, 0xb01e8a3e, 0xd71577c1, 0xbd314b27, 0x78af2fda,\r\n        0x55605c60, 0xe65525f3, 0xaa55ab94, 0x57489862, 0x63e81440,\r\n        0x55ca396a, 0x2aab10b6, 0xb4cc5c34, 0x1141e8ce, 0xa15486af,\r\n        0x7c72e993, 0xb3ee1411, 0x636fbc2a, 0x2ba9c55d, 0x741831f6,\r\n        0xce5c3e16, 0x9b87931e, 0xafd6ba33, 0x6c24cf5c, 0x7a325381,\r\n        0x28958677, 0x3b8f4898, 0x6b4bb9af, 0xc4bfe81b, 0x66282193,\r\n        0x61d809cc, 0xfb21a991, 0x487cac60, 0x5dec8032, 0xef845d5d,\r\n        0xe98575b1, 0xdc262302, 0xeb651b88, 0x23893e81, 0xd396acc5,\r\n        0x0f6d6ff3, 0x83f44239, 0x2e0b4482, 0xa4842004, 0x69c8f04a,\r\n        0x9e1f9b5e, 0x21c66842, 0xf6e96c9a, 0x670c9c61, 0xabd388f0,\r\n        0x6a51a0d2, 0xd8542f68, 0x960fa728, 0xab5133a3, 0x6eef0b6c,\r\n        0x137a3be4, 0xba3bf050, 0x7efb2a98, 0xa1f1651d, 0x39af0176,\r\n        0x66ca593e, 0x82430e88, 0x8cee8619, 0x456f9fb4, 0x7d84a5c3,\r\n        0x3b8b5ebe, 0xe06f75d8, 0x85c12073, 0x401a449f, 0x56c16aa6,\r\n        0x4ed3aa62, 0x363f7706, 0x1bfedf72, 0x429b023d, 0x37d0d724,\r\n        0xd00a1248, 0xdb0fead3, 0x49f1c09b, 0x075372c9, 0x80991b7b,\r\n        0x25d479d8, 0xf6e8def7, 0xe3fe501a, 0xb6794c3b, 0x976ce0bd,\r\n        0x04c006ba, 0xc1a94fb6, 0x409f60c4, 0x5e5c9ec2, 0x196a2463,\r\n        0x68fb6faf, 0x3e6c53b5, 0x1339b2eb, 0x3b52ec6f, 0x6dfc511f,\r\n        0x9b30952c, 0xcc814544, 0xaf5ebd09, 0xbee3d004, 0xde334afd,\r\n        0x660f2807, 0x192e4bb3, 0xc0cba857, 0x45c8740f, 0xd20b5f39,\r\n        0xb9d3fbdb, 0x5579c0bd, 0x1a60320a, 0xd6a100c6, 0x402c7279,\r\n        0x679f25fe, 0xfb1fa3cc, 0x8ea5e9f8, 0xdb3222f8, 0x3c7516df,\r\n        0xfd616b15, 0x2f501ec8, 0xad0552ab, 0x323db5fa, 0xfd238760,\r\n        0x53317b48, 0x3e00df82, 0x9e5c57bb, 0xca6f8ca0, 0x1a87562e,\r\n        0xdf1769db, 0xd542a8f6, 0x287effc3, 0xac6732c6, 0x8c4f5573,\r\n        0x695b27b0, 0xbbca58c8, 0xe1ffa35d, 0xb8f011a0, 0x10fa3d98,\r\n        0xfd2183b8, 0x4afcb56c, 0x2dd1d35b, 0x9a53e479, 0xb6f84565,\r\n        0xd28e49bc, 0x4bfb9790, 0xe1ddf2da, 0xa4cb7e33, 0x62fb1341,\r\n        0xcee4c6e8, 0xef20cada, 0x36774c01, 0xd07e9efe, 0x2bf11fb4,\r\n        0x95dbda4d, 0xae909198, 0xeaad8e71, 0x6b93d5a0, 0xd08ed1d0,\r\n        0xafc725e0, 0x8e3c5b2f, 0x8e7594b7, 0x8ff6e2fb, 0xf2122b64,\r\n        0x8888b812, 0x900df01c, 0x4fad5ea0, 0x688fc31c, 0xd1cff191,\r\n        0xb3a8c1ad, 0x2f2f2218, 0xbe0e1777, 0xea752dfe, 0x8b021fa1,\r\n        0xe5a0cc0f, 0xb56f74e8, 0x18acf3d6, 0xce89e299, 0xb4a84fe0,\r\n        0xfd13e0b7, 0x7cc43b81, 0xd2ada8d9, 0x165fa266, 0x80957705,\r\n        0x93cc7314, 0x211a1477, 0xe6ad2065, 0x77b5fa86, 0xc75442f5,\r\n        0xfb9d35cf, 0xebcdaf0c, 0x7b3e89a0, 0xd6411bd3, 0xae1e7e49,\r\n        0x00250e2d, 0x2071b35e, 0x226800bb, 0x57b8e0af, 0x2464369b,\r\n        0xf009b91e, 0x5563911d, 0x59dfa6aa, 0x78c14389, 0xd95a537f,\r\n        0x207d5ba2, 0x02e5b9c5, 0x83260376, 0x6295cfa9, 0x11c81968,\r\n        0x4e734a41, 0xb3472dca, 0x7b14a94a, 0x1b510052, 0x9a532915,\r\n        0xd60f573f, 0xbc9bc6e4, 0x2b60a476, 0x81e67400, 0x08ba6fb5,\r\n        0x571be91f, 0xf296ec6b, 0x2a0dd915, 0xb6636521, 0xe7b9f9b6,\r\n        0xff34052e, 0xc5855664, 0x53b02d5d, 0xa99f8fa1, 0x08ba4799,\r\n        0x6e85076a, 0x4b7a70e9, 0xb5b32944, 0xdb75092e, 0xc4192623,\r\n        0xad6ea6b0, 0x49a7df7d, 0x9cee60b8, 0x8fedb266, 0xecaa8c71,\r\n        0x699a17ff, 0x5664526c, 0xc2b19ee1, 0x193602a5, 0x75094c29,\r\n        0xa0591340, 0xe4183a3e, 0x3f54989a, 0x5b429d65, 0x6b8fe4d6,\r\n        0x99f73fd6, 0xa1d29c07, 0xefe830f5, 0x4d2d38e6, 0xf0255dc1,\r\n        0x4cdd2086, 0x8470eb26, 0x6382e9c6, 0x021ecc5e, 0x09686b3f,\r\n        0x3ebaefc9, 0x3c971814, 0x6b6a70a1, 0x687f3584, 0x52a0e286,\r\n        0xb79c5305, 0xaa500737, 0x3e07841c, 0x7fdeae5c, 0x8e7d44ec,\r\n        0x5716f2b8, 0xb03ada37, 0xf0500c0d, 0xf01c1f04, 0x0200b3ff,\r\n        0xae0cf51a, 0x3cb574b2, 0x25837a58, 0xdc0921bd, 0xd19113f9,\r\n        0x7ca92ff6, 0x94324773, 0x22f54701, 0x3ae5e581, 0x37c2dadc,\r\n        0xc8b57634, 0x9af3dda7, 0xa9446146, 0x0fd0030e, 0xecc8c73e,\r\n        0xa4751e41, 0xe238cd99, 0x3bea0e2f, 0x3280bba1, 0x183eb331,\r\n        0x4e548b38, 0x4f6db908, 0x6f420d03, 0xf60a04bf, 0x2cb81290,\r\n        0x24977c79, 0x5679b072, 0xbcaf89af, 0xde9a771f, 0xd9930810,\r\n        0xb38bae12, 0xdccf3f2e, 0x5512721f, 0x2e6b7124, 0x501adde6,\r\n        0x9f84cd87, 0x7a584718, 0x7408da17, 0xbc9f9abc, 0xe94b7d8c,\r\n        0xec7aec3a, 0xdb851dfa, 0x63094366, 0xc464c3d2, 0xef1c1847,\r\n        0x3215d908, 0xdd433b37, 0x24c2ba16, 0x12a14d43, 0x2a65c451,\r\n        0x50940002, 0x133ae4dd, 0x71dff89e, 0x10314e55, 0x81ac77d6,\r\n        0x5f11199b, 0x043556f1, 0xd7a3c76b, 0x3c11183b, 0x5924a509,\r\n        0xf28fe6ed, 0x97f1fbfa, 0x9ebabf2c, 0x1e153c6e, 0x86e34570,\r\n        0xeae96fb1, 0x860e5e0a, 0x5a3e2ab3, 0x771fe71c, 0x4e3d06fa,\r\n        0x2965dcb9, 0x99e71d0f, 0x803e89d6, 0x5266c825, 0x2e4cc978,\r\n        0x9c10b36a, 0xc6150eba, 0x94e2ea78, 0xa5fc3c53, 0x1e0a2df4,\r\n        0xf2f74ea7, 0x361d2b3d, 0x1939260f, 0x19c27960, 0x5223a708,\r\n        0xf71312b6, 0xebadfe6e, 0xeac31f66, 0xe3bc4595, 0xa67bc883,\r\n        0xb17f37d1, 0x018cff28, 0xc332ddef, 0xbe6c5aa5, 0x65582185,\r\n        0x68ab9802, 0xeecea50f, 0xdb2f953b, 0x2aef7dad, 0x5b6e2f84,\r\n        0x1521b628, 0x29076170, 0xecdd4775, 0x619f1510, 0x13cca830,\r\n        0xeb61bd96, 0x0334fe1e, 0xaa0363cf, 0xb5735c90, 0x4c70a239,\r\n        0xd59e9e0b, 0xcbaade14, 0xeecc86bc, 0x60622ca7, 0x9cab5cab,\r\n        0xb2f3846e, 0x648b1eaf, 0x19bdf0ca, 0xa02369b9, 0x655abb50,\r\n        0x40685a32, 0x3c2ab4b3, 0x319ee9d5, 0xc021b8f7, 0x9b540b19,\r\n        0x875fa099, 0x95f7997e, 0x623d7da8, 0xf837889a, 0x97e32d77,\r\n        0x11ed935f, 0x16681281, 0x0e358829, 0xc7e61fd6, 0x96dedfa1,\r\n        0x7858ba99, 0x57f584a5, 0x1b227263, 0x9b83c3ff, 0x1ac24696,\r\n        0xcdb30aeb, 0x532e3054, 0x8fd948e4, 0x6dbc3128, 0x58ebf2ef,\r\n        0x34c6ffea, 0xfe28ed61, 0xee7c3c73, 0x5d4a14d9, 0xe864b7e3,\r\n        0x42105d14, 0x203e13e0, 0x45eee2b6, 0xa3aaabea, 0xdb6c4f15,\r\n        0xfacb4fd0, 0xc742f442, 0xef6abbb5, 0x654f3b1d, 0x41cd2105,\r\n        0xd81e799e, 0x86854dc7, 0xe44b476a, 0x3d816250, 0xcf62a1f2,\r\n        0x5b8d2646, 0xfc8883a0, 0xc1c7b6a3, 0x7f1524c3, 0x69cb7492,\r\n        0x47848a0b, 0x5692b285, 0x095bbf00, 0xad19489d, 0x1462b174,\r\n        0x23820e00, 0x58428d2a, 0x0c55f5ea, 0x1dadf43e, 0x233f7061,\r\n        0x3372f092, 0x8d937e41, 0xd65fecf1, 0x6c223bdb, 0x7cde3759,\r\n        0xcbee7460, 0x4085f2a7, 0xce77326e, 0xa6078084, 0x19f8509e,\r\n        0xe8efd855, 0x61d99735, 0xa969a7aa, 0xc50c06c2, 0x5a04abfc,\r\n        0x800bcadc, 0x9e447a2e, 0xc3453484, 0xfdd56705, 0x0e1e9ec9,\r\n        0xdb73dbd3, 0x105588cd, 0x675fda79, 0xe3674340, 0xc5c43465,\r\n        0x713e38d8, 0x3d28f89e, 0xf16dff20, 0x153e21e7, 0x8fb03d4a,\r\n        0xe6e39f2b, 0xdb83adf7, 0xe93d5a68, 0x948140f7, 0xf64c261c,\r\n        0x94692934, 0x411520f7, 0x7602d4f7, 0xbcf46b2e, 0xd4a20068,\r\n        0xd4082471, 0x3320f46a, 0x43b7d4b7, 0x500061af, 0x1e39f62e,\r\n        0x97244546, 0x14214f74, 0xbf8b8840, 0x4d95fc1d, 0x96b591af,\r\n        0x70f4ddd3, 0x66a02f45, 0xbfbc09ec, 0x03bd9785, 0x7fac6dd0,\r\n        0x31cb8504, 0x96eb27b3, 0x55fd3941, 0xda2547e6, 0xabca0a9a,\r\n        0x28507825, 0x530429f4, 0x0a2c86da, 0xe9b66dfb, 0x68dc1462,\r\n        0xd7486900, 0x680ec0a4, 0x27a18dee, 0x4f3ffea2, 0xe887ad8c,\r\n        0xb58ce006, 0x7af4d6b6, 0xaace1e7c, 0xd3375fec, 0xce78a399,\r\n        0x406b2a42, 0x20fe9e35, 0xd9f385b9, 0xee39d7ab, 0x3b124e8b,\r\n        0x1dc9faf7, 0x4b6d1856, 0x26a36631, 0xeae397b2, 0x3a6efa74,\r\n        0xdd5b4332, 0x6841e7f7, 0xca7820fb, 0xfb0af54e, 0xd8feb397,\r\n        0x454056ac, 0xba489527, 0x55533a3a, 0x20838d87, 0xfe6ba9b7,\r\n        0xd096954b, 0x55a867bc, 0xa1159a58, 0xcca92963, 0x99e1db33,\r\n        0xa62a4a56, 0x3f3125f9, 0x5ef47e1c, 0x9029317c, 0xfdf8e802,\r\n        0x04272f70, 0x80bb155c, 0x05282ce3, 0x95c11548, 0xe4c66d22,\r\n        0x48c1133f, 0xc70f86dc, 0x07f9c9ee, 0x41041f0f, 0x404779a4,\r\n        0x5d886e17, 0x325f51eb, 0xd59bc0d1, 0xf2bcc18f, 0x41113564,\r\n        0x257b7834, 0x602a9c60, 0xdff8e8a3, 0x1f636c1b, 0x0e12b4c2,\r\n        0x02e1329e, 0xaf664fd1, 0xcad18115, 0x6b2395e0, 0x333e92e1,\r\n        0x3b240b62, 0xeebeb922, 0x85b2a20e, 0xe6ba0d99, 0xde720c8c,\r\n        0x2da2f728, 0xd0127845, 0x95b794fd, 0x647d0862, 0xe7ccf5f0,\r\n        0x5449a36f, 0x877d48fa, 0xc39dfd27, 0xf33e8d1e, 0x0a476341,\r\n        0x992eff74, 0x3a6f6eab, 0xf4f8fd37, 0xa812dc60, 0xa1ebddf8,\r\n        0x991be14c, 0xdb6e6b0d, 0xc67b5510, 0x6d672c37, 0x2765d43b,\r\n        0xdcd0e804, 0xf1290dc7, 0xcc00ffa3, 0xb5390f92, 0x690fed0b,\r\n        0x667b9ffb, 0xcedb7d9c, 0xa091cf0b, 0xd9155ea3, 0xbb132f88,\r\n        0x515bad24, 0x7b9479bf, 0x763bd6eb, 0x37392eb3, 0xcc115979,\r\n        0x8026e297, 0xf42e312d, 0x6842ada7, 0xc66a2b3b, 0x12754ccc,\r\n        0x782ef11c, 0x6a124237, 0xb79251e7, 0x06a1bbe6, 0x4bfb6350,\r\n        0x1a6b1018, 0x11caedfa, 0x3d25bdd8, 0xe2e1c3c9, 0x44421659,\r\n        0x0a121386, 0xd90cec6e, 0xd5abea2a, 0x64af674e, 0xda86a85f,\r\n        0xbebfe988, 0x64e4c3fe, 0x9dbc8057, 0xf0f7c086, 0x60787bf8,\r\n        0x6003604d, 0xd1fd8346, 0xf6381fb0, 0x7745ae04, 0xd736fccc,\r\n        0x83426b33, 0xf01eab71, 0xb0804187, 0x3c005e5f, 0x77a057be,\r\n        0xbde8ae24, 0x55464299, 0xbf582e61, 0x4e58f48f, 0xf2ddfda2,\r\n        0xf474ef38, 0x8789bdc2, 0x5366f9c3, 0xc8b38e74, 0xb475f255,\r\n        0x46fcd9b9, 0x7aeb2661, 0x8b1ddf84, 0x846a0e79, 0x915f95e2,\r\n        0x466e598e, 0x20b45770, 0x8cd55591, 0xc902de4c, 0xb90bace1,\r\n        0xbb8205d0, 0x11a86248, 0x7574a99e, 0xb77f19b6, 0xe0a9dc09,\r\n        0x662d09a1, 0xc4324633, 0xe85a1f02, 0x09f0be8c, 0x4a99a025,\r\n        0x1d6efe10, 0x1ab93d1d, 0x0ba5a4df, 0xa186f20f, 0x2868f169,\r\n        0xdcb7da83, 0x573906fe, 0xa1e2ce9b, 0x4fcd7f52, 0x50115e01,\r\n        0xa70683fa, 0xa002b5c4, 0x0de6d027, 0x9af88c27, 0x773f8641,\r\n        0xc3604c06, 0x61a806b5, 0xf0177a28, 0xc0f586e0, 0x006058aa,\r\n        0x30dc7d62, 0x11e69ed7, 0x2338ea63, 0x53c2dd94, 0xc2c21634,\r\n        0xbbcbee56, 0x90bcb6de, 0xebfc7da1, 0xce591d76, 0x6f05e409,\r\n        0x4b7c0188, 0x39720a3d, 0x7c927c24, 0x86e3725f, 0x724d9db9,\r\n        0x1ac15bb4, 0xd39eb8fc, 0xed545578, 0x08fca5b5, 0xd83d7cd3,\r\n        0x4dad0fc4, 0x1e50ef5e, 0xb161e6f8, 0xa28514d9, 0x6c51133c,\r\n        0x6fd5c7e7, 0x56e14ec4, 0x362abfce, 0xddc6c837, 0xd79a3234,\r\n        0x92638212, 0x670efa8e, 0x406000e0, 0x3a39ce37, 0xd3faf5cf,\r\n        0xabc27737, 0x5ac52d1b, 0x5cb0679e, 0x4fa33742, 0xd3822740,\r\n        0x99bc9bbe, 0xd5118e9d, 0xbf0f7315, 0xd62d1c7e, 0xc700c47b,\r\n        0xb78c1b6b, 0x21a19045, 0xb26eb1be, 0x6a366eb4, 0x5748ab2f,\r\n        0xbc946e79, 0xc6a376d2, 0x6549c2c8, 0x530ff8ee, 0x468dde7d,\r\n        0xd5730a1d, 0x4cd04dc6, 0x2939bbdb, 0xa9ba4650, 0xac9526e8,\r\n        0xbe5ee304, 0xa1fad5f0, 0x6a2d519a, 0x63ef8ce2, 0x9a86ee22,\r\n        0xc089c2b8, 0x43242ef6, 0xa51e03aa, 0x9cf2d0a4, 0x83c061ba,\r\n        0x9be96a4d, 0x8fe51550, 0xba645bd6, 0x2826a2f9, 0xa73a3ae1,\r\n        0x4ba99586, 0xef5562e9, 0xc72fefd3, 0xf752f7da, 0x3f046f69,\r\n        0x77fa0a59, 0x80e4a915, 0x87b08601, 0x9b09e6ad, 0x3b3ee593,\r\n        0xe990fd5a, 0x9e34d797, 0x2cf0b7d9, 0x022b8b51, 0x96d5ac3a,\r\n        0x017da67d, 0xd1cf3ed6, 0x7c7d2d28, 0x1f9f25cf, 0xadf2b89b,\r\n        0x5ad6b472, 0x5a88f54c, 0xe029ac71, 0xe019a5e6, 0x47b0acfd,\r\n        0xed93fa9b, 0xe8d3c48d, 0x283b57cc, 0xf8d56629, 0x79132e28,\r\n        0x785f0191, 0xed756055, 0xf7960e44, 0xe3d35e8c, 0x15056dd4,\r\n        0x88f46dba, 0x03a16125, 0x0564f0bd, 0xc3eb9e15, 0x3c9057a2,\r\n        0x97271aec, 0xa93a072a, 0x1b3f6d9b, 0x1e6321f5, 0xf59c66fb,\r\n        0x26dcf319, 0x7533d928, 0xb155fdf5, 0x03563482, 0x8aba3cbb,\r\n        0x28517711, 0xc20ad9f8, 0xabcc5167, 0xccad925f, 0x4de81751,\r\n        0x3830dc8e, 0x379d5862, 0x9320f991, 0xea7a90c2, 0xfb3e7bce,\r\n        0x5121ce64, 0x774fbe32, 0xa8b6e37e, 0xc3293d46, 0x48de5369,\r\n        0x6413e680, 0xa2ae0810, 0xdd6db224, 0x69852dfd, 0x09072166,\r\n        0xb39a460a, 0x6445c0dd, 0x586cdecf, 0x1c20c8ae, 0x5bbef7dd,\r\n        0x1b588d40, 0xccd2017f, 0x6bb4e3bb, 0xdda26a7e, 0x3a59ff45,\r\n        0x3e350a44, 0xbcb4cdd5, 0x72eacea8, 0xfa6484bb, 0x8d6612ae,\r\n        0xbf3c6f47, 0xd29be463, 0x542f5d9e, 0xaec2771b, 0xf64e6370,\r\n        0x740e0d8d, 0xe75b1357, 0xf8721671, 0xaf537d5d, 0x4040cb08,\r\n        0x4eb4e2cc, 0x34d2466a, 0x0115af84, 0xe1b00428, 0x95983a1d,\r\n        0x06b89fb4, 0xce6ea048, 0x6f3f3b82, 0x3520ab82, 0x011a1d4b,\r\n        0x277227f8, 0x611560b1, 0xe7933fdc, 0xbb3a792b, 0x344525bd,\r\n        0xa08839e1, 0x51ce794b, 0x2f32c9b7, 0xa01fbac9, 0xe01cc87e,\r\n        0xbcc7d1f6, 0xcf0111c3, 0xa1e8aac7, 0x1a908749, 0xd44fbd9a,\r\n        0xd0dadecb, 0xd50ada38, 0x0339c32a, 0xc6913667, 0x8df9317c,\r\n        0xe0b12b4f, 0xf79e59b7, 0x43f5bb3a, 0xf2d519ff, 0x27d9459c,\r\n        0xbf97222c, 0x15e6fc2a, 0x0f91fc71, 0x9b941525, 0xfae59361,\r\n        0xceb69ceb, 0xc2a86459, 0x12baa8d1, 0xb6c1075e, 0xe3056a0c,\r\n        0x10d25065, 0xcb03a442, 0xe0ec6e0e, 0x1698db3b, 0x4c98a0be,\r\n        0x3278e964, 0x9f1f9532, 0xe0d392df, 0xd3a0342b, 0x8971f21e,\r\n        0x1b0a7441, 0x4ba3348c, 0xc5be7120, 0xc37632d8, 0xdf359f8d,\r\n        0x9b992f2e, 0xe60b6f47, 0x0fe3f11d, 0xe54cda54, 0x1edad891,\r\n        0xce6279cf, 0xcd3e7e6f, 0x1618b166, 0xfd2c1d05, 0x848fd2c5,\r\n        0xf6fb2299, 0xf523f357, 0xa6327623, 0x93a83531, 0x56cccd02,\r\n        0xacf08162, 0x5a75ebb5, 0x6e163697, 0x88d273cc, 0xde966292,\r\n        0x81b949d0, 0x4c50901b, 0x71c65614, 0xe6c6c7bd, 0x327a140a,\r\n        0x45e1d006, 0xc3f27b9a, 0xc9aa53fd, 0x62a80f00, 0xbb25bfe2,\r\n        0x35bdd2f6, 0x71126905, 0xb2040222, 0xb6cbcf7c, 0xcd769c2b,\r\n        0x53113ec0, 0x1640e3d3, 0x38abbd60, 0x2547adf0, 0xba38209c,\r\n        0xf746ce76, 0x77afa1c5, 0x20756060, 0x85cbfe4e, 0x8ae88dd8,\r\n        0x7aaaf9b0, 0x4cf9aa7e, 0x1948c25c, 0x02fb8a8c, 0x01c36ae4,\r\n        0xd6ebe1f9, 0x90d4f869, 0xa65cdea0, 0x3f09252d, 0xc208e69f,\r\n        0xb74e6132, 0xce77e25b, 0x578fdfe3, 0x3ac372e6\r\n    ];\r\n\r\n    /**\r\n     * @type {Array.<number>}\r\n     * @const\r\n     * @inner\r\n     */\r\n    var C_ORIG = [\r\n        0x4f727068, 0x65616e42, 0x65686f6c, 0x64657253, 0x63727944,\r\n        0x6f756274\r\n    ];\r\n\r\n    /**\r\n     * @param {Array.<number>} lr\r\n     * @param {number} off\r\n     * @param {Array.<number>} P\r\n     * @param {Array.<number>} S\r\n     * @returns {Array.<number>}\r\n     * @inner\r\n     */\r\n    function _encipher(lr, off, P, S) { // This is our bottleneck: 1714/1905 ticks / 90% - see profile.txt\r\n        var n,\r\n            l = lr[off],\r\n            r = lr[off + 1];\r\n\r\n        l ^= P[0];\r\n\r\n        /*\r\n        for (var i=0, k=BLOWFISH_NUM_ROUNDS-2; i<=k;)\r\n            // Feistel substitution on left word\r\n            n  = S[l >>> 24],\r\n            n += S[0x100 | ((l >> 16) & 0xff)],\r\n            n ^= S[0x200 | ((l >> 8) & 0xff)],\r\n            n += S[0x300 | (l & 0xff)],\r\n            r ^= n ^ P[++i],\r\n            // Feistel substitution on right word\r\n            n  = S[r >>> 24],\r\n            n += S[0x100 | ((r >> 16) & 0xff)],\r\n            n ^= S[0x200 | ((r >> 8) & 0xff)],\r\n            n += S[0x300 | (r & 0xff)],\r\n            l ^= n ^ P[++i];\r\n        */\r\n\r\n        //The following is an unrolled version of the above loop.\r\n        //Iteration 0\r\n        n  = S[l >>> 24];\r\n        n += S[0x100 | ((l >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((l >> 8) & 0xff)];\r\n        n += S[0x300 | (l & 0xff)];\r\n        r ^= n ^ P[1];\r\n        n  = S[r >>> 24];\r\n        n += S[0x100 | ((r >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((r >> 8) & 0xff)];\r\n        n += S[0x300 | (r & 0xff)];\r\n        l ^= n ^ P[2];\r\n        //Iteration 1\r\n        n  = S[l >>> 24];\r\n        n += S[0x100 | ((l >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((l >> 8) & 0xff)];\r\n        n += S[0x300 | (l & 0xff)];\r\n        r ^= n ^ P[3];\r\n        n  = S[r >>> 24];\r\n        n += S[0x100 | ((r >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((r >> 8) & 0xff)];\r\n        n += S[0x300 | (r & 0xff)];\r\n        l ^= n ^ P[4];\r\n        //Iteration 2\r\n        n  = S[l >>> 24];\r\n        n += S[0x100 | ((l >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((l >> 8) & 0xff)];\r\n        n += S[0x300 | (l & 0xff)];\r\n        r ^= n ^ P[5];\r\n        n  = S[r >>> 24];\r\n        n += S[0x100 | ((r >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((r >> 8) & 0xff)];\r\n        n += S[0x300 | (r & 0xff)];\r\n        l ^= n ^ P[6];\r\n        //Iteration 3\r\n        n  = S[l >>> 24];\r\n        n += S[0x100 | ((l >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((l >> 8) & 0xff)];\r\n        n += S[0x300 | (l & 0xff)];\r\n        r ^= n ^ P[7];\r\n        n  = S[r >>> 24];\r\n        n += S[0x100 | ((r >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((r >> 8) & 0xff)];\r\n        n += S[0x300 | (r & 0xff)];\r\n        l ^= n ^ P[8];\r\n        //Iteration 4\r\n        n  = S[l >>> 24];\r\n        n += S[0x100 | ((l >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((l >> 8) & 0xff)];\r\n        n += S[0x300 | (l & 0xff)];\r\n        r ^= n ^ P[9];\r\n        n  = S[r >>> 24];\r\n        n += S[0x100 | ((r >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((r >> 8) & 0xff)];\r\n        n += S[0x300 | (r & 0xff)];\r\n        l ^= n ^ P[10];\r\n        //Iteration 5\r\n        n  = S[l >>> 24];\r\n        n += S[0x100 | ((l >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((l >> 8) & 0xff)];\r\n        n += S[0x300 | (l & 0xff)];\r\n        r ^= n ^ P[11];\r\n        n  = S[r >>> 24];\r\n        n += S[0x100 | ((r >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((r >> 8) & 0xff)];\r\n        n += S[0x300 | (r & 0xff)];\r\n        l ^= n ^ P[12];\r\n        //Iteration 6\r\n        n  = S[l >>> 24];\r\n        n += S[0x100 | ((l >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((l >> 8) & 0xff)];\r\n        n += S[0x300 | (l & 0xff)];\r\n        r ^= n ^ P[13];\r\n        n  = S[r >>> 24];\r\n        n += S[0x100 | ((r >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((r >> 8) & 0xff)];\r\n        n += S[0x300 | (r & 0xff)];\r\n        l ^= n ^ P[14];\r\n        //Iteration 7\r\n        n  = S[l >>> 24];\r\n        n += S[0x100 | ((l >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((l >> 8) & 0xff)];\r\n        n += S[0x300 | (l & 0xff)];\r\n        r ^= n ^ P[15];\r\n        n  = S[r >>> 24];\r\n        n += S[0x100 | ((r >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((r >> 8) & 0xff)];\r\n        n += S[0x300 | (r & 0xff)];\r\n        l ^= n ^ P[16];\r\n\r\n        lr[off] = r ^ P[BLOWFISH_NUM_ROUNDS + 1];\r\n        lr[off + 1] = l;\r\n        return lr;\r\n    }\r\n\r\n    /**\r\n     * @param {Array.<number>} data\r\n     * @param {number} offp\r\n     * @returns {{key: number, offp: number}}\r\n     * @inner\r\n     */\r\n    function _streamtoword(data, offp) {\r\n        for (var i = 0, word = 0; i < 4; ++i)\r\n            word = (word << 8) | (data[offp] & 0xff),\r\n            offp = (offp + 1) % data.length;\r\n        return { key: word, offp: offp };\r\n    }\r\n\r\n    /**\r\n     * @param {Array.<number>} key\r\n     * @param {Array.<number>} P\r\n     * @param {Array.<number>} S\r\n     * @inner\r\n     */\r\n    function _key(key, P, S) {\r\n        var offset = 0,\r\n            lr = [0, 0],\r\n            plen = P.length,\r\n            slen = S.length,\r\n            sw;\r\n        for (var i = 0; i < plen; i++)\r\n            sw = _streamtoword(key, offset),\r\n            offset = sw.offp,\r\n            P[i] = P[i] ^ sw.key;\r\n        for (i = 0; i < plen; i += 2)\r\n            lr = _encipher(lr, 0, P, S),\r\n            P[i] = lr[0],\r\n            P[i + 1] = lr[1];\r\n        for (i = 0; i < slen; i += 2)\r\n            lr = _encipher(lr, 0, P, S),\r\n            S[i] = lr[0],\r\n            S[i + 1] = lr[1];\r\n    }\r\n\r\n    /**\r\n     * Expensive key schedule Blowfish.\r\n     * @param {Array.<number>} data\r\n     * @param {Array.<number>} key\r\n     * @param {Array.<number>} P\r\n     * @param {Array.<number>} S\r\n     * @inner\r\n     */\r\n    function _ekskey(data, key, P, S) {\r\n        var offp = 0,\r\n            lr = [0, 0],\r\n            plen = P.length,\r\n            slen = S.length,\r\n            sw;\r\n        for (var i = 0; i < plen; i++)\r\n            sw = _streamtoword(key, offp),\r\n            offp = sw.offp,\r\n            P[i] = P[i] ^ sw.key;\r\n        offp = 0;\r\n        for (i = 0; i < plen; i += 2)\r\n            sw = _streamtoword(data, offp),\r\n            offp = sw.offp,\r\n            lr[0] ^= sw.key,\r\n            sw = _streamtoword(data, offp),\r\n            offp = sw.offp,\r\n            lr[1] ^= sw.key,\r\n            lr = _encipher(lr, 0, P, S),\r\n            P[i] = lr[0],\r\n            P[i + 1] = lr[1];\r\n        for (i = 0; i < slen; i += 2)\r\n            sw = _streamtoword(data, offp),\r\n            offp = sw.offp,\r\n            lr[0] ^= sw.key,\r\n            sw = _streamtoword(data, offp),\r\n            offp = sw.offp,\r\n            lr[1] ^= sw.key,\r\n            lr = _encipher(lr, 0, P, S),\r\n            S[i] = lr[0],\r\n            S[i + 1] = lr[1];\r\n    }\r\n\r\n    /**\r\n     * Internaly crypts a string.\r\n     * @param {Array.<number>} b Bytes to crypt\r\n     * @param {Array.<number>} salt Salt bytes to use\r\n     * @param {number} rounds Number of rounds\r\n     * @param {function(Error, Array.<number>=)=} callback Callback receiving the error, if any, and the resulting bytes. If\r\n     *  omitted, the operation will be performed synchronously.\r\n     *  @param {function(number)=} progressCallback Callback called with the current progress\r\n     * @returns {!Array.<number>|undefined} Resulting bytes if callback has been omitted, otherwise `undefined`\r\n     * @inner\r\n     */\r\n    function _crypt(b, salt, rounds, callback, progressCallback) {\r\n        var cdata = C_ORIG.slice(),\r\n            clen = cdata.length,\r\n            err;\r\n\r\n        // Validate\r\n        if (rounds < 4 || rounds > 31) {\r\n            err = Error(\"Illegal number of rounds (4-31): \"+rounds);\r\n            if (callback) {\r\n                nextTick(callback.bind(this, err));\r\n                return;\r\n            } else\r\n                throw err;\r\n        }\r\n        if (salt.length !== BCRYPT_SALT_LEN) {\r\n            err =Error(\"Illegal salt length: \"+salt.length+\" != \"+BCRYPT_SALT_LEN);\r\n            if (callback) {\r\n                nextTick(callback.bind(this, err));\r\n                return;\r\n            } else\r\n                throw err;\r\n        }\r\n        rounds = (1 << rounds) >>> 0;\r\n\r\n        var P, S, i = 0, j;\r\n\r\n        //Use typed arrays when available - huge speedup!\r\n        if (Int32Array) {\r\n            P = new Int32Array(P_ORIG);\r\n            S = new Int32Array(S_ORIG);\r\n        } else {\r\n            P = P_ORIG.slice();\r\n            S = S_ORIG.slice();\r\n        }\r\n\r\n        _ekskey(salt, b, P, S);\r\n\r\n        /**\r\n         * Calcualtes the next round.\r\n         * @returns {Array.<number>|undefined} Resulting array if callback has been omitted, otherwise `undefined`\r\n         * @inner\r\n         */\r\n        function next() {\r\n            if (progressCallback)\r\n                progressCallback(i / rounds);\r\n            if (i < rounds) {\r\n                var start = Date.now();\r\n                for (; i < rounds;) {\r\n                    i = i + 1;\r\n                    _key(b, P, S);\r\n                    _key(salt, P, S);\r\n                    if (Date.now() - start > MAX_EXECUTION_TIME)\r\n                        break;\r\n                }\r\n            } else {\r\n                for (i = 0; i < 64; i++)\r\n                    for (j = 0; j < (clen >> 1); j++)\r\n                        _encipher(cdata, j << 1, P, S);\r\n                var ret = [];\r\n                for (i = 0; i < clen; i++)\r\n                    ret.push(((cdata[i] >> 24) & 0xff) >>> 0),\r\n                    ret.push(((cdata[i] >> 16) & 0xff) >>> 0),\r\n                    ret.push(((cdata[i] >> 8) & 0xff) >>> 0),\r\n                    ret.push((cdata[i] & 0xff) >>> 0);\r\n                if (callback) {\r\n                    callback(null, ret);\r\n                    return;\r\n                } else\r\n                    return ret;\r\n            }\r\n            if (callback)\r\n                nextTick(next);\r\n        }\r\n\r\n        // Async\r\n        if (typeof callback !== 'undefined') {\r\n            next();\r\n\r\n            // Sync\r\n        } else {\r\n            var res;\r\n            while (true)\r\n                if (typeof(res = next()) !== 'undefined')\r\n                    return res || [];\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Internally hashes a string.\r\n     * @param {string} s String to hash\r\n     * @param {?string} salt Salt to use, actually never null\r\n     * @param {function(Error, string=)=} callback Callback receiving the error, if any, and the resulting hash. If omitted,\r\n     *  hashing is perormed synchronously.\r\n     *  @param {function(number)=} progressCallback Callback called with the current progress\r\n     * @returns {string|undefined} Resulting hash if callback has been omitted, otherwise `undefined`\r\n     * @inner\r\n     */\r\n    function _hash(s, salt, callback, progressCallback) {\r\n        var err;\r\n        if (typeof s !== 'string' || typeof salt !== 'string') {\r\n            err = Error(\"Invalid string / salt: Not a string\");\r\n            if (callback) {\r\n                nextTick(callback.bind(this, err));\r\n                return;\r\n            }\r\n            else\r\n                throw err;\r\n        }\r\n\r\n        // Validate the salt\r\n        var minor, offset;\r\n        if (salt.charAt(0) !== '$' || salt.charAt(1) !== '2') {\r\n            err = Error(\"Invalid salt version: \"+salt.substring(0,2));\r\n            if (callback) {\r\n                nextTick(callback.bind(this, err));\r\n                return;\r\n            }\r\n            else\r\n                throw err;\r\n        }\r\n        if (salt.charAt(2) === '$')\r\n            minor = String.fromCharCode(0),\r\n            offset = 3;\r\n        else {\r\n            minor = salt.charAt(2);\r\n            if ((minor !== 'a' && minor !== 'b' && minor !== 'y') || salt.charAt(3) !== '$') {\r\n                err = Error(\"Invalid salt revision: \"+salt.substring(2,4));\r\n                if (callback) {\r\n                    nextTick(callback.bind(this, err));\r\n                    return;\r\n                } else\r\n                    throw err;\r\n            }\r\n            offset = 4;\r\n        }\r\n\r\n        // Extract number of rounds\r\n        if (salt.charAt(offset + 2) > '$') {\r\n            err = Error(\"Missing salt rounds\");\r\n            if (callback) {\r\n                nextTick(callback.bind(this, err));\r\n                return;\r\n            } else\r\n                throw err;\r\n        }\r\n        var r1 = parseInt(salt.substring(offset, offset + 1), 10) * 10,\r\n            r2 = parseInt(salt.substring(offset + 1, offset + 2), 10),\r\n            rounds = r1 + r2,\r\n            real_salt = salt.substring(offset + 3, offset + 25);\r\n        s += minor >= 'a' ? \"\\x00\" : \"\";\r\n\r\n        var passwordb = stringToBytes(s),\r\n            saltb = base64_decode(real_salt, BCRYPT_SALT_LEN);\r\n\r\n        /**\r\n         * Finishes hashing.\r\n         * @param {Array.<number>} bytes Byte array\r\n         * @returns {string}\r\n         * @inner\r\n         */\r\n        function finish(bytes) {\r\n            var res = [];\r\n            res.push(\"$2\");\r\n            if (minor >= 'a')\r\n                res.push(minor);\r\n            res.push(\"$\");\r\n            if (rounds < 10)\r\n                res.push(\"0\");\r\n            res.push(rounds.toString());\r\n            res.push(\"$\");\r\n            res.push(base64_encode(saltb, saltb.length));\r\n            res.push(base64_encode(bytes, C_ORIG.length * 4 - 1));\r\n            return res.join('');\r\n        }\r\n\r\n        // Sync\r\n        if (typeof callback == 'undefined')\r\n            return finish(_crypt(passwordb, saltb, rounds));\r\n\r\n        // Async\r\n        else {\r\n            _crypt(passwordb, saltb, rounds, function(err, bytes) {\r\n                if (err)\r\n                    callback(err, null);\r\n                else\r\n                    callback(null, finish(bytes));\r\n            }, progressCallback);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Encodes a byte array to base64 with up to len bytes of input, using the custom bcrypt alphabet.\r\n     * @function\r\n     * @param {!Array.<number>} b Byte array\r\n     * @param {number} len Maximum input length\r\n     * @returns {string}\r\n     * @expose\r\n     */\r\n    bcrypt.encodeBase64 = base64_encode;\r\n\r\n    /**\r\n     * Decodes a base64 encoded string to up to len bytes of output, using the custom bcrypt alphabet.\r\n     * @function\r\n     * @param {string} s String to decode\r\n     * @param {number} len Maximum output length\r\n     * @returns {!Array.<number>}\r\n     * @expose\r\n     */\r\n    bcrypt.decodeBase64 = base64_decode;\r\n\r\n    return bcrypt;\r\n}));\r\n","import type {\r\n  ApiResponse,\r\n  LoginCredentials,\r\n  User,\r\n  AdaptedUser,\r\n  SyncConfig,\r\n} from \"../types\";\r\nimport { EncryptionService } from \"./encryption.service\";\r\nimport { dbService } from \"./db.service\";\r\nimport bcrypt from \"bcryptjs\";\r\n\r\nexport class ApiService {\r\n  private readonly BASE_URL = \"https://calls.trolley.systems/api\";\r\n  private readonly defaultConfig: SyncConfig = {\r\n    maxPages: 10,\r\n    maxRecords: 1000,\r\n    syncInterval: 60000, // 1 minute\r\n  };\r\n\r\n  constructor(private config: Partial<SyncConfig> = {}) {\r\n    this.config = { ...this.defaultConfig, ...config };\r\n  }\r\n\r\n  private async fetchWithDecryption<T>(url: string, options?: RequestInit): Promise<T> {\r\n    try {\r\n      const response = await fetch(url, options);\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n      const decryptedData = await EncryptionService.decryptResponse(data);\r\n\r\n      if (!decryptedData) {\r\n        throw new Error('Failed to decrypt response');\r\n      }\r\n\r\n      return decryptedData as T;\r\n    } catch (error) {\r\n      console.error('Fetch failed:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async login(credentials: LoginCredentials): Promise<User> {\r\n    try {\r\n      // Always try to authenticate using cached credentials first\r\n      const cachedUser = await dbService.getUserByUsername(\r\n        credentials.username\r\n      );\r\n      if (\r\n        cachedUser &&\r\n        (await this.verifyPassword(credentials.password, cachedUser.password))\r\n      ) {\r\n        return {\r\n          id: cachedUser.id,\r\n          username: cachedUser.username,\r\n          password: cachedUser.password,\r\n          name: `${cachedUser.firstName} ${cachedUser.lastName}`,\r\n          email: cachedUser.email,\r\n        };\r\n      }\r\n\r\n      if (!navigator.onLine) {\r\n        throw new Error(\r\n          \"No internet connection and no valid cached credentials found\"\r\n        );\r\n      }\r\n\r\n      const response = await fetch(`${this.BASE_URL}/login`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify(credentials),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n\r\n      const data: ApiResponse<User> = await response.json();\r\n\r\n      if (!data.success) {\r\n        throw new Error(data.message || \"Login failed\");\r\n      }\r\n\r\n      // Cache the user data for offline use\r\n      const adaptedUser = this.adaptUser(data.data);\r\n      await dbService.saveUsers([adaptedUser]);\r\n\r\n      return data.data;\r\n    } catch (error) {\r\n      console.error(\"Login failed:\", error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  private adaptUser(user: User): AdaptedUser {\r\n    const [firstName, ...lastNameParts] = user.name.split(\" \");\r\n    const lastName = lastNameParts.join(\" \");\r\n\r\n    return {\r\n      id: user.id,\r\n      username: user.username,\r\n      password: user.password,\r\n      firstName,\r\n      lastName,\r\n      email: user.email,\r\n    };\r\n  }\r\n\r\n  async syncUsers(): Promise<void> {\r\n    let currentPage = 1;\r\n    let totalRecords = 0;\r\n    const allUsers: User[] = [];\r\n\r\n    try {\r\n      if (!navigator.onLine) {\r\n        // Use cached data when offline\r\n        const cachedUsers = await dbService.getAllUsers();\r\n        await dbService.updateSyncStatus(cachedUsers.length, false);\r\n        return;\r\n      }\r\n\r\n      while (\r\n        currentPage <= this.config.maxPages! &&\r\n        totalRecords < this.config.maxRecords!\r\n      ) {\r\n        console.log(`Fetching users page ${currentPage}...`);\r\n        const users = await this.fetchWithDecryption<User[]>(\r\n          `${this.BASE_URL}/users?page=${currentPage}`\r\n        );\r\n        console.log(`Received ${users.length} users from page ${currentPage}`);\r\n\r\n        if (!users.length) break;\r\n\r\n        allUsers.push(...users);\r\n        totalRecords += users.length;\r\n        currentPage++;\r\n      }\r\n\r\n      console.log(`Total users fetched: ${allUsers.length}`);\r\n      const adaptedUsers = allUsers.map((user) => this.adaptUser(user));\r\n      await dbService.saveUsers(adaptedUsers);\r\n      await dbService.updateSyncStatus(totalRecords, true);\r\n\r\n      // Process offline queue\r\n      await this.processOfflineQueue();\r\n    } catch (error) {\r\n      console.error(\"Sync failed:\", error);\r\n      // If sync fails, try to use cached data\r\n      const cachedUsers = await dbService.getAllUsers();\r\n      await dbService.updateSyncStatus(cachedUsers.length, false);\r\n    }\r\n  }\r\n\r\n  private async processOfflineQueue(): Promise<void> {\r\n    if (!navigator.onLine) return;\r\n\r\n    try {\r\n      const queue = await dbService.getOfflineQueue();\r\n      for (const item of queue) {\r\n        try {\r\n          switch (item.action) {\r\n            case \"create\":\r\n              await this.createUser(item.data);\r\n              break;\r\n            case \"update\":\r\n              await this.updateUser(item.data);\r\n              break;\r\n            case \"delete\":\r\n              await this.deleteUser(item.data.id);\r\n              break;\r\n          }\r\n        } catch (error) {\r\n          console.error(\r\n            `Failed to process offline action ${item.action}:`,\r\n            error\r\n          );\r\n        }\r\n      }\r\n      await dbService.clearOfflineQueue();\r\n    } catch (error) {\r\n      console.error(\"Failed to process offline queue:\", error);\r\n    }\r\n  }\r\n\r\n  async createUser(user: User): Promise<void> {\r\n    if (!navigator.onLine) {\r\n      await dbService.addToOfflineQueue(\"create\", user);\r\n      return;\r\n    }\r\n\r\n    // Implement API call for creating user\r\n  }\r\n\r\n  async updateUser(user: User): Promise<void> {\r\n    if (!navigator.onLine) {\r\n      await dbService.addToOfflineQueue(\"update\", user);\r\n      return;\r\n    }\r\n\r\n    // Implement API call for updating user\r\n  }\r\n\r\n  async deleteUser(userId: number): Promise<void> {\r\n    if (!navigator.onLine) {\r\n      await dbService.addToOfflineQueue(\"delete\", { id: userId });\r\n      return;\r\n    }\r\n\r\n    // Implement API call for deleting user\r\n  }\r\n\r\n  async verifyPassword(\r\n    plainPassword: string,\r\n    hashedPassword: string\r\n  ): Promise<boolean> {\r\n    return bcrypt.compare(plainPassword, hashedPassword);\r\n  }\r\n\r\n  async startSync(): Promise<void> {\r\n    try {\r\n      // Initial sync\r\n      await this.syncUsers();\r\n\r\n      window.addEventListener(\"offline\", async () => {\r\n        await dbService.updateSyncStatus(0, false);\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Periodic sync setup failed:\", error);\r\n      throw error;\r\n    }\r\n  }\r\n}\r\n\r\nexport const apiService = new ApiService();\r\n","import { defineStore } from 'pinia';\r\nimport { ref } from 'vue';\r\nimport type { User } from '../types';\r\nimport { apiService } from '../services/api.service';\r\n\r\nexport const useAuthStore = defineStore('auth', () => {\r\n  const user = ref<User | null>(null);\r\n  const isAuthenticated = ref(false);\r\n  const isLoading = ref(false);\r\n  const error = ref<string | null>(null);\r\n\r\n  async function login(username: string, password: string) {\r\n    try {\r\n      isLoading.value = true;\r\n      error.value = null;\r\n      \r\n      const userData = await apiService.login({ username, password });\r\n      const isValid = await apiService.verifyPassword(password, userData.password);\r\n      \r\n      if (!isValid) {\r\n        throw new Error('Invalid credentials');\r\n      }\r\n\r\n      user.value = userData;\r\n      isAuthenticated.value = true;\r\n    } catch (err) {\r\n      error.value = err instanceof Error ? err.message : 'Login failed';\r\n      throw err;\r\n    } finally {\r\n      isLoading.value = false;\r\n    }\r\n  }\r\n\r\n  function logout() {\r\n    user.value = null;\r\n    isAuthenticated.value = false;\r\n    error.value = null;\r\n  }\r\n\r\n  return {\r\n    user,\r\n    isAuthenticated,\r\n    isLoading,\r\n    error,\r\n    login,\r\n    logout\r\n  };\r\n}); ","import { defineStore } from \"pinia\";\r\nimport { ref } from \"vue\";\r\nimport { apiService } from \"../services/api.service\";\r\nimport { dbService } from \"../services/db.service\";\r\nimport type { AdaptedUser } from \"../types\";\r\n\r\nexport const useSyncStore = defineStore(\"sync\", () => {\r\n  const isSyncing = ref(false);\r\n  const lastSyncTime = ref<number | null>(null);\r\n  const totalRecords = ref(0);\r\n  const error = ref<string | null>(null);\r\n\r\n  async function initialize() {\r\n    await dbService.init();\r\n\r\n    const status = await dbService.getSyncStatus();\r\n\r\n    if (status) {\r\n      lastSyncTime.value = status.lastSync;\r\n      totalRecords.value = status.totalRecords;\r\n    }\r\n  }\r\n\r\n  async function startSync() {\r\n    // Prevent duplicate sync operations\r\n    if (isSyncing.value) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      isSyncing.value = true;\r\n      error.value = null;\r\n\r\n      await apiService.startSync();\r\n    } catch (err) {\r\n      error.value = err instanceof Error ? err.message : \"Sync failed\";\r\n      throw err;\r\n    } finally {\r\n      isSyncing.value = false;\r\n    }\r\n  }\r\n\r\n  async function getUsers(): Promise<AdaptedUser[]> {\r\n    return dbService.getAllUsers();\r\n  }\r\n\r\n  return {\r\n    isSyncing,\r\n    lastSyncTime,\r\n    totalRecords,\r\n    error,\r\n    initialize,\r\n    startSync,\r\n    getUsers,\r\n  };\r\n});\r\n","<template>\r\n  <transition name=\"fade\" mode=\"out-in\" :duration=\"300\">\r\n    <div v-show=\"isSyncing\" class=\"sync-status-wrapper\">\r\n      <div class=\"sync-status\">\r\n        <p> Syncing in progress...</p>\r\n      </div>\r\n    </div>\r\n  </transition>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { storeToRefs } from \"pinia\";\r\nimport { useSyncStore } from \"../stores/sync.store\";\r\n\r\nconst syncStore = useSyncStore();\r\n\r\nconst { isSyncing } = storeToRefs(syncStore);\r\n</script>\r\n\r\n<style scoped>\r\n.sync-status-wrapper {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 999999;\r\n  background: rgba(0, 0, 0, 0.3);\r\n  margin: 0;\r\n  pointer-events: all;\r\n}\r\n\r\n.sync-status {\r\n  background: white;\r\n  padding: 1rem;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 999999;\r\n  pointer-events: all;\r\n  font-style: italic;\r\n}\r\n</style>\r\n","<script setup lang=\"ts\">\r\nimport { useRouter } from \"vue-router\";\r\nimport { useAuthStore } from \"./stores/auth.store\";\r\nimport { useSyncStore } from \"./stores/sync.store\";\r\nimport { storeToRefs } from \"pinia\";\r\nimport { ref, onMounted, onUnmounted } from \"vue\";\r\nimport SyncProgress from \"./components/SyncProgress.vue\";\r\n\r\nconst router = useRouter();\r\nconst authStore = useAuthStore();\r\nconst syncStore = useSyncStore();\r\nconst isOnline = ref(navigator.onLine);\r\nconst syncIntervalRef = ref<number | null>(null);\r\nconst { isAuthenticated } = storeToRefs(authStore);\r\n\r\nconst syncInterval: number = 60000; // 1 minute\r\n\r\nfunction updateOnlineStatus() {\r\n  isOnline.value = navigator.onLine;\r\n\r\n  // When entering offline mode, clear the sync interval\r\n  if (!isOnline.value) {\r\n    resetSyncInterval();\r\n  }\r\n\r\n  if (isOnline.value) {\r\n    syncStore.startSync();\r\n\r\n    resetSyncInterval();\r\n\r\n    registerSyncInterval();\r\n  }\r\n}\r\n\r\nconsole.log(\"Initial authentication state:\", isAuthenticated.value);\r\n\r\nonMounted(async () => {\r\n  window.addEventListener(\"online\", updateOnlineStatus);\r\n  window.addEventListener(\"offline\", updateOnlineStatus);\r\n\r\n  try {\r\n    await syncStore.initialize();\r\n\r\n    if (isOnline.value) {\r\n      syncStore.startSync();\r\n      registerSyncInterval();\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Error during initialization:\", error);\r\n  }\r\n});\r\n\r\nonUnmounted(() => {\r\n  window.removeEventListener(\"online\", updateOnlineStatus);\r\n  window.removeEventListener(\"offline\", updateOnlineStatus);\r\n});\r\n\r\nfunction resetSyncInterval() {\r\n  if (syncIntervalRef.value) {\r\n    clearInterval(syncIntervalRef.value);\r\n    syncIntervalRef.value = null;\r\n  }\r\n}\r\n\r\nfunction registerSyncInterval() {\r\n  if (syncIntervalRef.value) return;\r\n\r\n  syncIntervalRef.value = window.setInterval(() => {\r\n    if (isOnline.value) {\r\n      syncStore.startSync();\r\n    }\r\n  }, syncInterval);\r\n}\r\n\r\nasync function handleLogout() {\r\n  authStore.logout();\r\n\r\n  router.push(\"/login\");\r\n}\r\n</script>\r\n\r\n<template>\r\n  <div class=\"app\">\r\n    <nav v-if=\"isAuthenticated\" class=\"nav\">\r\n      <router-link to=\"/dashboard\">Dashboard</router-link>\r\n      <button @click=\"handleLogout\" class=\"logout-btn\">Logout</button>\r\n    </nav>\r\n\r\n    <SyncProgress />\r\n\r\n    <router-view v-slot=\"{ Component }\">\r\n      <transition name=\"fade\" mode=\"out-in\">\r\n        <component :is=\"Component\" :isOnline=\"isOnline\" />\r\n      </transition>\r\n    </router-view>\r\n  </div>\r\n</template>\r\n\r\n<style>\r\n.app {\r\n  min-height: 100vh;\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n.nav {\r\n  background: white;\r\n  padding: 1rem;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.nav a {\r\n  color: #333;\r\n  text-decoration: none;\r\n  font-weight: 500;\r\n}\r\n\r\n.nav a.router-link-active {\r\n  color: #4caf50;\r\n}\r\n\r\n.logout-btn {\r\n  padding: 0.5rem 1rem;\r\n  background-color: #dc3545;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  transition: background-color 0.2s;\r\n}\r\n\r\n.logout-btn:hover {\r\n  background-color: #c82333;\r\n}\r\n\r\n.fade-enter-active,\r\n.fade-leave-active {\r\n  transition: opacity 0.3s ease;\r\n}\r\n\r\n.fade-enter-from,\r\n.fade-leave-to {\r\n  opacity: 0;\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"login-container\">\r\n    <form @submit.prevent=\"handleSubmit\" class=\"login-form\">\r\n      <h2>Login</h2>\r\n\r\n      <div class=\"connection-status\" :class=\"{ offline: !props.isOnline }\">\r\n        {{ props.isOnline ? \"Online Mode\" : \"Offline Mode\" }}\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <label for=\"username\">Username</label>\r\n        <input\r\n          id=\"username\"\r\n          v-model=\"username\"\r\n          type=\"text\"\r\n          required\r\n          :disabled=\"isLoading\"\r\n        />\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <label for=\"password\">Password</label>\r\n        <input\r\n          id=\"password\"\r\n          v-model=\"password\"\r\n          type=\"password\"\r\n          required\r\n          :disabled=\"isLoading\"\r\n        />\r\n      </div>\r\n\r\n      <div v-if=\"error\" class=\"error-message\">\r\n        {{ error }}\r\n      </div>\r\n\r\n      <div v-if=\"!props.isOnline\" class=\"offline-message\">\r\n        You are currently offline. You can still log in using cached\r\n        credentials.\r\n      </div>\r\n\r\n      <button type=\"submit\" :disabled=\"isLoading\">\r\n        {{ isLoading ? \"Logging in...\" : \"Login\" }}\r\n      </button>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, defineProps } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\nimport { useAuthStore } from \"../stores/auth.store\";\r\n\r\nconst props = defineProps([\"isOnline\"]);\r\nconst router = useRouter();\r\nconst authStore = useAuthStore();\r\n\r\nconst username = ref(\"\");\r\nconst password = ref(\"\");\r\nconst isLoading = ref(false);\r\nconst error = ref<string | null>(null);\r\n\r\nasync function handleSubmit() {\r\n  try {\r\n    isLoading.value = true;\r\n    error.value = null;\r\n    await authStore.login(username.value, password.value);\r\n    router.push(\"/dashboard\");\r\n  } catch (err) {\r\n    error.value = err instanceof Error ? err.message : \"Login failed\";\r\n  } finally {\r\n    isLoading.value = false;\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.login-container {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  min-height: 100vh;\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n.login-form {\r\n  background: white;\r\n  padding: 2rem;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n  width: 100%;\r\n  max-width: 400px;\r\n}\r\n\r\n.connection-status {\r\n  text-align: center;\r\n  padding: 0.5rem;\r\n  margin-bottom: 1rem;\r\n  border-radius: 4px;\r\n  background-color: #4caf50;\r\n  color: white;\r\n  font-size: 0.875rem;\r\n}\r\n\r\n.connection-status.offline {\r\n  background-color: #dc3545;\r\n}\r\n\r\n.form-group {\r\n  margin-bottom: 1rem;\r\n}\r\n\r\nlabel {\r\n  display: block;\r\n  margin-bottom: 0.5rem;\r\n  color: #333;\r\n}\r\n\r\ninput {\r\n  width: 100%;\r\n  padding: 0.5rem;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  font-size: 1rem;\r\n}\r\n\r\nbutton {\r\n  width: 100%;\r\n  padding: 0.75rem;\r\n  background-color: #4caf50;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  font-size: 1rem;\r\n  cursor: pointer;\r\n  transition: background-color 0.2s;\r\n}\r\n\r\nbutton:hover {\r\n  background-color: #45a049;\r\n}\r\n\r\nbutton:disabled {\r\n  background-color: #cccccc;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.error-message {\r\n  color: #dc3545;\r\n  margin-bottom: 1rem;\r\n  font-size: 0.875rem;\r\n}\r\n\r\n.offline-message {\r\n  color: #856404;\r\n  background-color: #fff3cd;\r\n  border: 1px solid #ffeeba;\r\n  padding: 0.75rem;\r\n  border-radius: 4px;\r\n  margin-bottom: 1rem;\r\n  font-size: 0.875rem;\r\n}\r\n</style>\r\n","import { createRouter, createWebHistory } from 'vue-router';\r\nimport { useAuthStore } from '../stores/auth.store';\r\nimport LoginForm from '../components/LoginForm.vue';\r\n\r\nconst router = createRouter({\r\n  history: createWebHistory(import.meta.env.BASE_URL),\r\n  routes: [\r\n    {\r\n      path: '/',\r\n      redirect: '/dashboard'\r\n    },\r\n    {\r\n      path: '/login',\r\n      name: 'login',\r\n      component: LoginForm,\r\n      meta: { requiresAuth: false }\r\n    },\r\n    {\r\n      path: '/dashboard',\r\n      name: 'dashboard',\r\n      component: () => import('../views/Dashboard.vue'),\r\n      meta: { requiresAuth: true }\r\n    },\r\n    {\r\n      path: '/:pathMatch(.*)*',\r\n      redirect: '/dashboard'\r\n    }\r\n  ]\r\n});\r\n\r\nrouter.beforeEach(async (to, _from, next) => {\r\n  const authStore = useAuthStore();\r\n  const requiresAuth = to.matched.some(record => record.meta.requiresAuth);\r\n\r\n  try {\r\n    if (requiresAuth && !authStore.isAuthenticated) {\r\n      next('/login');\r\n    } else if (to.path === '/login' && authStore.isAuthenticated) {\r\n      next('/dashboard');\r\n    } else {\r\n      next();\r\n    }\r\n  } catch (error) {\r\n    console.error('Navigation error:', error);\r\n    next('/login');\r\n  }\r\n});\r\n\r\nexport default router; ","import { createApp } from 'vue'\r\nimport { createPinia } from 'pinia'\r\nimport App from './App.vue'\r\nimport router from './router'\r\nimport './style.css'\r\n\r\nconsole.log('Starting application initialization...')\r\n\r\n// Create app instance\r\nconst app = createApp(App)\r\nconsole.log('Vue app instance created')\r\n\r\n// Create and use Pinia store\r\nconst pinia = createPinia()\r\napp.use(pinia)\r\nconsole.log('Pinia store initialized')\r\n\r\n// Use router\r\napp.use(router)\r\nconsole.log('Router initialized')\r\n\r\n// Mount app\r\napp.mount('#app')\r\nconsole.log('App mounted to #app')\r\n\r\n// Register service worker for PWA\r\nif ('serviceWorker' in navigator) {\r\n  window.addEventListener('load', () => {\r\n    console.log('Registering service worker...')\r\n    navigator.serviceWorker.register('/sw.js')\r\n      .then(registration => {\r\n        console.log('Service Worker registered:', registration)\r\n      })\r\n      .catch(error => {\r\n        console.error('Service Worker registration failed:', error)\r\n      })\r\n  })\r\n}\r\n"],"file":"assets/index-dfd7d6bf.js"}